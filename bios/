[38;5;238mâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
       [38;5;238mâ”‚ [0mFile: [1mbios.asm[0m
       [38;5;238mâ”‚ [0mSize: [1m137.6 KB[0m
[38;5;238mâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
[38;5;238m   1[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *******************************************************************[0m
[38;5;238m   2[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** This software is copyright 2005 by Michael H Riley          ***[0m
[38;5;238m   3[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** You have permission to use, modify, copy, and distribute    ***[0m
[38;5;238m   4[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** this software so long as this copyright notice is retained. ***[0m
[38;5;238m   5[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** This software may not be used in commercial applications    ***[0m
[38;5;238m   6[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** without express written permission from the author.         ***[0m
[38;5;238m   7[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *******************************************************************[0m
[38;5;238m   8[0m   [38;5;238mâ”‚[0m 
[38;5;238m   9[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] Configuration for Mike Riley's PicoElf with Spare Time Gizmos' EPROM .[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94m..[0m
[38;5;238m  10[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mPICOELF[0m
[38;5;238m  11[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m STG style UART interface[0m
[38;5;238m  12[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m    [0m[38;2;190;132;255m6[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... UART register select I/O port[0m
[38;5;238m  13[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m      [0m[38;2;190;132;255m7[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... UART data I/O port[0m
[38;5;238m  14[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mNVR[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m STG style NVR/RTC chip[0m
[38;5;238m  15[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m     [0m[38;2;190;132;255m6[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... NVR/RTC address I/O port[0m
[38;5;238m  16[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m       [0m[38;2;190;132;255m7[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... NVR/RTC data I/O port[0m
[38;5;238m  17[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mEIDE[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m to support an exteded IDE functions[0m
[38;5;238m  18[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m     [0m[38;2;190;132;255m2[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE register select I/O port[0m
[38;5;238m  19[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m       [0m[38;2;190;132;255m3[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE data I/O port[0m
[38;5;238m  20[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m            [0m[38;2;166;226;46mbn2[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m PicoElf serial input is on EF2[0m
[38;5;238m  21[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m            [0m[38;2;166;226;46mb2[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... and IS inverted ...[0m
[38;5;238m  22[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERSEQ[0m[38;2;248;248;242m          [0m[38;2;166;226;46mreq[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ...[0m
[38;5;238m  23[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERREQ[0m[38;2;248;248;242m          [0m[38;2;166;226;46mseq[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ...[0m
[38;5;238m  24[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mBASE[0m[38;2;248;248;242m            [0m[38;2;190;132;255m0f000h[0m
[38;5;238m  25[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m  26[0m   [38;5;238mâ”‚[0m 
[38;5;238m  27[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] Spare Time Gizmos Elf 2000 configuration ...[0m
[38;5;238m  28[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mELF2K[0m
[38;5;238m  29[0m   [38;5;238mâ”‚[0m [38;2;166;226;46minclude[0m[38;2;248;248;242m [0m[38;2;166;226;46mconfig.inc[0m
[38;5;238m  30[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSTGROM[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m Spare Time Gizmos' EPROM image[0m
[38;5;238m  31[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERHDX[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m console serial is half duplex[0m
[38;5;238m  32[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m STG style UART interface[0m
[38;5;238m  33[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m    [0m[38;2;190;132;255m2[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... UART register select I/O port[0m
[38;5;238m  34[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m      [0m[38;2;190;132;255m3[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... UART data I/O port[0m
[38;5;238m  35[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mNVR[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m STG style NVR/RTC chip[0m
[38;5;238m  36[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m     [0m[38;2;190;132;255m2[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... NVR/RTC address I/O port[0m
[38;5;238m  37[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m       [0m[38;2;190;132;255m3[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... NVR/RTC data I/O port[0m
[38;5;238m  38[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mEIDE[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m to support an exteded IDE functions[0m
[38;5;238m  39[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m     [0m[38;2;190;132;255m2[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE register select I/O port[0m
[38;5;238m  40[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m       [0m[38;2;190;132;255m3[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE data I/O port[0m
[38;5;238m  41[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m            [0m[38;2;166;226;46mb3[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m bit banged serial input on EF3[0m
[38;5;238m  42[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m            [0m[38;2;166;226;46mbn3[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... and it is NOT inverted ...[0m
[38;5;238m  43[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERSEQ[0m[38;2;248;248;242m          [0m[38;2;166;226;46mseq[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ...[0m
[38;5;238m  44[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERREQ[0m[38;2;248;248;242m          [0m[38;2;166;226;46mreq[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ...[0m
[38;5;238m  45[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mKBD_DATA[0m[38;2;248;248;242m        [0m[38;2;190;132;255m7[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m PS/2 keyboard ASCII data port[0m
[38;5;238m  46[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mBKBD[0m[38;2;248;248;242m            [0m[38;2;166;226;46mb2[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m branch on keyboard data ready[0m
[38;5;238m  47[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mBNKBD[0m[38;2;248;248;242m           [0m[38;2;166;226;46mbn2[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... no keyboard data ready[0m
[38;5;238m  48[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mBASE[0m[38;2;248;248;242m            [0m[38;2;190;132;255m0f000h[0m
[38;5;238m  49[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m  50[0m   [38;5;238mâ”‚[0m 
[38;5;238m  51[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mMC[0m
[38;5;238m  52[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m         [0m[38;2;166;226;46mb3[0m
[38;5;238m  53[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m        [0m[38;2;166;226;46mbn3[0m
[38;5;238m  54[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERSEQ[0m[38;2;248;248;242m      [0m[38;2;166;226;46mseq[0m
[38;5;238m  55[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERREQ[0m[38;2;248;248;242m      [0m[38;2;166;226;46mreq[0m
[38;5;238m  56[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m   [0m[38;2;190;132;255m2[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE register select I/O port[0m
[38;5;238m  57[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m     [0m[38;2;190;132;255m3[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE data I/O port[0m
[38;5;238m  58[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mBASE[0m[38;2;248;248;242m            [0m[38;2;190;132;255m0f000h[0m
[38;5;238m  59[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m  60[0m   [38;5;238mâ”‚[0m 
[38;5;238m  61[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mMCHIP[0m
[38;5;238m  62[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m        [0m[38;2;166;226;46mbn3[0m
[38;5;238m  63[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m         [0m[38;2;166;226;46mb3[0m
[38;5;238m  64[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERSEQ[0m[38;2;248;248;242m      [0m[38;2;166;226;46mreq[0m
[38;5;238m  65[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERREQ[0m[38;2;248;248;242m      [0m[38;2;166;226;46mseq[0m
[38;5;238m  66[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m   [0m[38;2;190;132;255m2[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE register select I/O port[0m
[38;5;238m  67[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m  [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m     [0m[38;2;190;132;255m3[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE data I/O port[0m
[38;5;238m  68[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mBASE[0m[38;2;248;248;242m          [0m[38;2;190;132;255m00000h[0m
[38;5;238m  69[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m  70[0m   [38;5;238mâ”‚[0m 
[38;5;238m  71[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifndef[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERP[0m
[38;5;238m  72[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m        [0m[38;2;166;226;46mb2[0m
[38;5;238m  73[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m       [0m[38;2;166;226;46mbn2[0m
[38;5;238m  74[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERSEQ[0m[38;2;248;248;242m     [0m[38;2;166;226;46mseq[0m
[38;5;238m  75[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERREQ[0m[38;2;248;248;242m     [0m[38;2;166;226;46mreq[0m
[38;5;238m  76[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m   [0m[38;2;190;132;255m2[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE register select I/O port[0m
[38;5;238m  77[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m     [0m[38;2;190;132;255m3[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m  ... IDE data I/O port[0m
[38;5;238m  78[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mdefine[0m[38;2;248;248;242m [0m[38;2;166;226;46mBASE[0m[38;2;248;248;242m            [0m[38;2;190;132;255m0f000h[0m
[38;5;238m  79[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m  80[0m   [38;5;238mâ”‚[0m 
[38;5;238m  81[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] Other definitions ...[0m
[38;5;238m  82[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdata[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m  83[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mscall[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr4[0m
[38;5;238m  84[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msret[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr5[0m
[38;5;238m  85[0m   [38;5;238mâ”‚[0m 
[38;5;238m  86[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mVIDEO[0m
[38;5;238m  87[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0200h[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] the video card support needs more room[0m
[38;5;238m  88[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m  89[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0300h[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] extended BIOS starts here[0m
[38;5;238m  90[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m  91[0m   [38;5;238mâ”‚[0m 
[38;5;238m  92[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m A couple of words on the baud rate constant (RE.1) usage -[0m
[38;5;238m  93[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m
[38;5;238m  94[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   If (RE.1 & 0xFE) is not zero and is not 0xFE, then the bit banged "UART" i[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94ms[0m
[38;5;238m  95[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m in use and (RE.1 & 0xFE) determines the baud rate (its the delay constant).[0m
[38;5;238m  96[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m In this case the LSB of RE.1 (i.e. RE.1 & 1) is the local echo flag - if thi[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94ms[0m
[38;5;238m  97[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m is 1 then all input is echoed back to the terminal.  If it is zero, then no[0m
[38;5;238m  98[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m echo is performed.[0m
[38;5;238m  99[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m
[38;5;238m 100[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   On the Elf2K and the PicoElf (and maybe other future hardware platforms) i[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mf[0m
[38;5;238m 101[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m (RE.1 & 0xFE) is zero (i.e. the bit banged serial delay is zero!) then the[0m
[38;5;238m 102[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m hardware UART is used for console I/O.  The UART still obeys the local echo[0m
[38;5;238m 103[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m flag, so if the LSB of RE.1 is one then character input will be echoed.[0m
[38;5;238m 104[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m
[38;5;238m 105[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   On the Elf2K, and currently only on the Elf2K, if (RE.1 & 0xFE) == 0xFE[0m
[38;5;238m 106[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m (i.e. the slowest possible bit banged baud ate) then the Elf 2000 80 column[0m
[38;5;238m 107[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m video card and PS/2 keyboard interface are used for console I/O.  The local[0m
[38;5;238m 108[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m echo flag still works in this case as well, so PS/2 keyboard input will be[0m
[38;5;238m 109[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m echoed to the video card only if the LSB of RE.1 is set.[0m
[38;5;238m 110[0m   [38;5;238mâ”‚[0m 
[38;5;238m 111[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m
[38;5;238m 112[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************[0m
[38;5;238m 113[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Test to see if uart is installed ***[0m
[38;5;238m 114[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** DF=1 uart is installed           ***[0m
[38;5;238m 115[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** DF=0 uart is not installed       ***[0m
[38;5;238m 116[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************[0m
[38;5;238m 117[0m   [38;5;238mâ”‚[0m [38;2;166;226;46muart_test[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] output immediate data[0m
[38;5;238m 118[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] select the UARTs MCR[0m
[38;5;238m 119[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m14h[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 120[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] enable loopback mode, turn all[0m
[38;5;238m 121[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m10h[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]  ... modem control bits OFF[0m
[38;5;238m 122[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] now select the modem status regist[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mer[0m
[38;5;238m 123[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m16h[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 124[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] point to the stack again[0m
[38;5;238m 125[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read the MSR[0m
[38;5;238m 126[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0f0h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] check the current modem status[0m
[38;5;238m 127[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mno_uart[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] all bits should be zero[0m
[38;5;238m 128[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] back to X=P[0m
[38;5;238m 129[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] select the MCR again[0m
[38;5;238m 130[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m14h[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 131[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] enable loopback mode, turn all[0m
[38;5;238m 132[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m1fh[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]  ... modem control bits ON[0m
[38;5;238m 133[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] select the MSR[0m
[38;5;238m 134[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m16h[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 135[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 136[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read the MSR[0m
[38;5;238m 137[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0f0h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] check the current modem status[0m
[38;5;238m 138[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0f0h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] all bits should be one this time[0m
[38;5;238m 139[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mno_uart[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] no uart if they arent[0m
[38;5;238m 140[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] X=P[0m
[38;5;238m 141[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] select the MCR once more[0m
[38;5;238m 142[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m14h[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 143[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] disable loopback mode, set DTR & R[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mTS[0m
[38;5;238m 144[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m03h[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 145[0m   [38;5;238mâ”‚[0m [38;2;166;226;46myes_uart[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal uart is present[0m
[38;5;238m 146[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m 147[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mno_uart[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal no uart installed[0m
[38;5;238m 148[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m 149[0m   [38;5;238mâ”‚[0m 
[38;5;238m 150[0m   [38;5;238mâ”‚[0m 
[38;5;238m 151[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***************************************************[0m
[38;5;238m 152[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Elf 2000 version of timalc, selects between ***[0m
[38;5;238m 153[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** bit-banged and uart serial modes            ***[0m
[38;5;238m 154[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns RE.1 = 0 Uart was selected          ***[0m
[38;5;238m 155[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***         RF.0 = comm port parameters         ***[0m
[38;5;238m 156[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***         RE.1 <> 0 bit-banged baud constant  ***[0m
[38;5;238m 157[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***************************************************[0m
[38;5;238m 158[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_timalc[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m    [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if uart is present[0m
[38;5;238m 159[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m     [0m[38;2;166;226;46muart_test[0m
[38;5;238m 160[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m   [0m[38;2;166;226;46mtimalc_o[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m use standard timalc if no uart[0m
[38;5;238m 161[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m    [0m[38;2;190;132;255m34h[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set 9600 N81[0m
[38;5;238m 162[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46msep[0m[38;2;248;248;242m    [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set deafult baud rate[0m
[38;5;238m 163[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_stbd[0m
[38;5;238m 164[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_sblp2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46msex[0m[38;2;248;248;242m    [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] address the data register[0m
[38;5;238m 165[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;249;38;114mout[0m[38;2;248;248;242m    [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 166[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m     [0m[38;2;190;132;255m10h[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 167[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46msex[0m[38;2;248;248;242m    [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 168[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46minp[0m[38;2;248;248;242m    [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read RBR to clear DR bit[0m
[38;5;238m 169[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46msex[0m[38;2;248;248;242m    [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to set uart register to line sta[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mt[0m
[38;5;238m 170[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;249;38;114mout[0m[38;2;248;248;242m    [0m[38;2;166;226;46mUART_SELECT[0m
[38;5;238m 171[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m     [0m[38;2;190;132;255m015h[0m
[38;5;238m 172[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46msex[0m[38;2;248;248;242m    [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point X back to stack[0m
[38;5;238m 173[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_sblp1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m   [0m[38;2;166;226;46me2k_setbd1[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if character detectd on EF line[0m
[38;5;238m 174[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46minp[0m[38;2;248;248;242m    [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read modem status[0m
[38;5;238m 175[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift DR bit into carry[0m
[38;5;238m 176[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m   [0m[38;2;166;226;46me2k_sblp1[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop if no character detected on uart[0m
[38;5;238m 177[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46msex[0m[38;2;248;248;242m    [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for immediate out[0m
[38;5;238m 178[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;249;38;114mout[0m[38;2;248;248;242m    [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select uart data register[0m
[38;5;238m 179[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m     [0m[38;2;190;132;255m010h[0m
[38;5;238m 180[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46msex[0m[38;2;248;248;242m    [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point X back to stack[0m
[38;5;238m 181[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46minp[0m[38;2;248;248;242m    [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read received char to stack[0m
[38;5;238m 182[0m   [38;5;238mâ”‚[0m 
[38;5;238m 183[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   We have already initialized the UART to 9600bps and we know that the[0m
[38;5;238m 184[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m operator is typing a carriage return character on the terminal connected[0m
[38;5;238m 185[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m to the UART (at least he is supposed to be!).  Obviously, if his terminal[0m
[38;5;238m 186[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m is set to 9600bps we will actually receive a 0Dh character in the UART[0m
[38;5;238m 187[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m buffer.  But even if his terminal is set to a faster or slower baud[0m
[38;5;238m 188[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m rate, assuming that he is still typing carriage return, the bit pattern[0m
[38;5;238m 189[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m we receive is equally unique.  For example, if he transmits CR at 4800 bps[0m
[38;5;238m 190[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m and we receive at 9600bps, well actually see 0E6h in the buffer.  So[0m
[38;5;238m 191[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m by looking up whatever value we receive in a table, we can determine the[0m
[38;5;238m 192[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m correct abud rate.[0m
[38;5;238m 193[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m        [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;166;226;46mabdtab[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] point to the auto baud table[0m
[38;5;238m 194[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m        [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 195[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m        [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;166;226;46mabdtab[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 196[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m        [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 197[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mabdlp1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m        [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] get a byte from auto baud table[0m
[38;5;238m 198[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m        [0m[38;2;166;226;46me2k_timalc[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] start over if end of table[0m
[38;5;238m 199[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m        [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 200[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mxor[0m[38;2;248;248;242m                          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] compare it to byte on the stack[0m
[38;5;238m 201[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m        [0m[38;2;166;226;46mabd2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] branch if we found a match[0m
[38;5;238m 202[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m        [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] skip the second byte[0m
[38;5;238m 203[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m        [0m[38;2;166;226;46mabdlp1[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and keep looking[0m
[38;5;238m 204[0m   [38;5;238mâ”‚[0m 
[38;5;238m 205[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   Here if we find a match in the auto baud table.  Remember that were[0m
[38;5;238m 206[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m receiving at a fairly fast rate (9600bps) and if the operator was sending[0m
[38;5;238m 207[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m at a slow rate (e.g. 2400bps) then his UART is _probably still sending_[0m
[38;5;238m 208[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m right now!  To avoid having the last half of the CR show up as a garbage[0m
[38;5;238m 209[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m character, we have to delay long enough for the transmitter to finish,[0m
[38;5;238m 210[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m worst case.   BTW, at 4MHz, each clock is 500ns and each machine cycle[0m
[38;5;238m 211[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m is 4us.  At 1200 baud, 10 bits takes about 8ms to transmit, so a delay[0m
[38;5;238m 212[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m of about 8ms/4us = 2000 cycles is about enough.[0m
[38;5;238m 213[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mabd2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m        [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] clear the delay counter[0m
[38;5;238m 214[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mabd2a[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;249;38;114mnop[0m[38;2;248;248;242m                          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] 3 cycles[0m
[38;5;238m 215[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mnop[0m[38;2;248;248;242m                          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] 3 cycles[0m
[38;5;238m 216[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m        [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] 2 cycles[0m
[38;5;238m 217[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m        [0m[38;2;166;226;46mabd2a[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] 2 cycles[0m
[38;5;238m 218[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m                                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] 10 cycles * 256 = 2560 cycles...[0m
[38;5;238m 219[0m   [38;5;238mâ”‚[0m 
[38;5;238m 220[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   The UART data register is still selected - read the RBR to remove any[0m
[38;5;238m 221[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m garbage character that might be there...[0m
[38;5;238m 222[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46minp[0m[38;2;248;248;242m        [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read the data register first[0m
[38;5;238m 223[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msex[0m[38;2;248;248;242m        [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 224[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mout[0m[38;2;248;248;242m        [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]  ... address the LSR[0m
[38;5;238m 225[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m         [0m[38;2;190;132;255m015h[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]  ...[0m
[38;5;238m 226[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msex[0m[38;2;248;248;242m        [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]         ...[0m
[38;5;238m 227[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46minp[0m[38;2;248;248;242m        [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]        and clear the error flags [0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mtoo[0m
[38;5;238m 228[0m   [38;5;238mâ”‚[0m 
[38;5;238m 229[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] All done - return re.1 ==1 and rf.0 == baud rate...[0m
[38;5;238m 230[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m        [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [MHR] turn echoing on by default[0m
[38;5;238m 231[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m        [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 232[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m        [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] get the UART mode byte[0m
[38;5;238m 233[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m        [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] return it in rf[0m
[38;5;238m 234[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m        [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] change the UART mode[0m
[38;5;238m 235[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m         [0m[38;2;166;226;46me2k_stbd[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 236[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m        [0m[38;2;166;226;46mtimalc_rt[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and return[0m
[38;5;238m 237[0m   [38;5;238mâ”‚[0m 
[38;5;238m 238[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Table of autoboad results and baud rates...[0m
[38;5;238m 239[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mabdtab[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m        [0m[38;2;190;132;255m00d34h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]  9,600bps[0m
[38;5;238m 240[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m        [0m[38;2;190;132;255m0f235h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] 19,200bps[0m
[38;5;238m 241[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m        [0m[38;2;190;132;255m0f935h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] 19,200bps[0m
[38;5;238m 242[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m        [0m[38;2;190;132;255m0e633h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]  4,800bps[0m
[38;5;238m 243[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m        [0m[38;2;190;132;255m07832h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]  2,400bps[0m
[38;5;238m 244[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m       dw        08031h             ; [RLA]  1,200bps (unreliable!)[0m
[38;5;238m 245[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m        [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] end of table[0m
[38;5;238m 246[0m   [38;5;238mâ”‚[0m 
[38;5;238m 247[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Here if we detect activity on the bit banged port...[0m
[38;5;238m 248[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_setbd1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m    [0m[38;2;166;226;46mend_sb[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m use standard bit-banged serial[0m
[38;5;238m 249[0m   [38;5;238mâ”‚[0m 
[38;5;238m 250[0m   [38;5;238mâ”‚[0m 
[38;5;238m 251[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *******************************************[0m
[38;5;238m 252[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Implement RE.1 for serial selection ***[0m
[38;5;238m 253[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *******************************************[0m
[38;5;238m 254[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_brk[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m      [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get baud constant[0m
[38;5;238m 255[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mani[0m[38;2;248;248;242m      [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] mask out echo bit[0m
[38;5;238m 256[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_utest[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] branch if the UART is in use[0m
[38;5;238m 257[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mVIDEO[0m
[38;5;238m 258[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m      [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] is the ELF2K video card active?[0m
[38;5;238m 259[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46me2k_ptest[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] yes, test PS/2 keyboard[0m
[38;5;238m 260[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m 261[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_btest[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] otherwise use the bit banged seri[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mal[0m
[38;5;238m 262[0m   [38;5;238mâ”‚[0m 
[38;5;238m 263[0m   [38;5;238mâ”‚[0m 
[38;5;238m 264[0m   [38;5;238mâ”‚[0m 
[38;5;238m 265[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] Generic transmit routine ...[0m
[38;5;238m 266[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]    This will send the character to the UART, video card or[0m
[38;5;238m 267[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] the plain old bit banged serial port, depending on which[0m
[38;5;238m 268[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] was detected ...[0m
[38;5;238m 269[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_tx[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save character[0m
[38;5;238m 270[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get baud constant[0m
[38;5;238m 271[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] mask out echo bit[0m
[38;5;238m 272[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_tx1[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] jump if UART[0m
[38;5;238m 273[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mVIDEO[0m
[38;5;238m 274[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] is the Elf2K video card active?[0m
[38;5;238m 275[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_tx2[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] yes - use 80 column video card[0m
[38;5;238m 276[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m 277[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover character[0m
[38;5;238m 278[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mf_btype[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump to bit-banged code[0m
[38;5;238m 279[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_tx1[0m[38;2;248;248;242m:[0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover character[0m
[38;5;238m 280[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mf_utype[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump to UART routine[0m
[38;5;238m 281[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mVIDEO[0m
[38;5;238m 282[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_tx2[0m[38;2;248;248;242m:[0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] recover the character[0m
[38;5;238m 283[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mvtputc[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and print it on the CRT[0m
[38;5;238m 284[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m 285[0m   [38;5;238mâ”‚[0m 
[38;5;238m 286[0m   [38;5;238mâ”‚[0m 
[38;5;238m 287[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] Generic receive routine ...[0m
[38;5;238m 288[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]    Receive a character from the UART, PS/2 keyboard or bit[0m
[38;5;238m 289[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] banged serial depending on which is installed...[0m
[38;5;238m 290[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_rx[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get baud constant[0m
[38;5;238m 291[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] mask out echo bit[0m
[38;5;238m 292[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mf_uread[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] use the UART if it is zero[0m
[38;5;238m 293[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mVIDEO[0m
[38;5;238m 294[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] is the Elf2K PS/2 keyboard active?[0m
[38;5;238m 295[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_pread[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] if its zero, use PS/2[0m
[38;5;238m 296[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m 297[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mf_bread[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump to bit banged code[0m
[38;5;238m 298[0m   [38;5;238mâ”‚[0m 
[38;5;238m 299[0m   [38;5;238mâ”‚[0m 
[38;5;238m 300[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************************[0m
[38;5;238m 301[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Read byte from Elf 2000 PS/2 Keyboard ***[0m
[38;5;238m 302[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: D - byte read                ***[0m
[38;5;238m 303[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************************[0m
[38;5;238m 304[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mVIDEO[0m
[38;5;238m 305[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_pread[0m[38;2;248;248;242m:[0m
[38;5;238m 306[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mBNKBD[0m[38;2;248;248;242m   [0m[38;2;255;255;255m$[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] wait for data ready flag[0m
[38;5;238m 307[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mKBD_DATA[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read the PS/2 data port[0m
[38;5;238m 308[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] save the character for a minute[0m
[38;5;238m 309[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] get the baud rate constant[0m
[38;5;238m 310[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] shift the echo bit into DF[0m
[38;5;238m 311[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] restore the data read[0m
[38;5;238m 312[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mvtputc[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] echo it and return[0m
[38;5;238m 313[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] no echo - just return[0m
[38;5;238m 314[0m   [38;5;238mâ”‚[0m 
[38;5;238m 315[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************************[0m
[38;5;238m 316[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Test to see if character available from PS/2 ***[0m
[38;5;238m 317[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=1 - character available          ***[0m
[38;5;238m 318[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************************[0m
[38;5;238m 319[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_ptest[0m[38;2;248;248;242m:[0m
[38;5;238m 320[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] clear DF[0m
[38;5;238m 321[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mBNKBD[0m[38;2;248;248;242m   [0m[38;2;166;226;46mptest1[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] PS/2 data available is EF2[0m
[38;5;238m 322[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] its set - set DF[0m
[38;5;238m 323[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mptest1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and return[0m
[38;5;238m 324[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m 325[0m   [38;5;238mâ”‚[0m 
[38;5;238m 326[0m   [38;5;238mâ”‚[0m 
[38;5;238m 327[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************************[0m
[38;5;238m 328[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Test to see if character available from UART ***[0m
[38;5;238m 329[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=1 - character available          ***[0m
[38;5;238m 330[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************************[0m
[38;5;238m 331[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_utest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m015h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need UART line status register[0m
[38;5;238m 332[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for out[0m
[38;5;238m 333[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to register select port[0m
[38;5;238m 334[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m back to a free spot[0m
[38;5;238m 335[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read line status register[0m
[38;5;238m 336[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift data ready bit into DF[0m
[38;5;238m 337[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m 338[0m   [38;5;238mâ”‚[0m 
[38;5;238m 339[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m 340[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Read byte from Elf 2000 UART ***[0m
[38;5;238m 341[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: D - byte read       ***[0m
[38;5;238m 342[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m 343[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_uread[0m[38;2;248;248;242m:[0m
[38;5;238m 344[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m015h[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need UART line status register[0m
[38;5;238m 345[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for out[0m
[38;5;238m 346[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to register select port[0m
[38;5;238m 347[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m correct for inc on out[0m
[38;5;238m 348[0m   [38;5;238mâ”‚[0m [38;2;166;226;46muread_lp[0m[38;2;248;248;242m:[0m
[38;5;238m 349[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read line status register[0m
[38;5;238m 350[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m mask for data ready bit[0m
[38;5;238m 351[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46muread_lp[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if no bytes to read[0m
[38;5;238m 352[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m010h[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select data register[0m
[38;5;238m 353[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for out[0m
[38;5;238m 354[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to register select port[0m
[38;5;238m 355[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m back to free spot[0m
[38;5;238m 356[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read UART data register[0m
[38;5;238m 357[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save for a moment[0m
[38;5;238m 358[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to check for echo[0m
[38;5;238m 359[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift echo flag into DF[0m
[38;5;238m 360[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover read byte[0m
[38;5;238m 361[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46me2k_utype[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if need echo[0m
[38;5;238m 362[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m otherwise return[0m
[38;5;238m 363[0m   [38;5;238mâ”‚[0m 
[38;5;238m 364[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[MHR]     lbz     e2k_uread           ; [RLA] ignore nulls[0m
[38;5;238m 365[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     xri     $ff                 ; [RLA] and ignore $FF bytes[0m
[38;5;238m 366[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     lbz     e2k_uread           ; [RLA] ....[0m
[38;5;238m 367[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     xri     $ff                 ; [RLA] ...[0m
[38;5;238m 368[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     sep     sret                ; return byte to caller[0m
[38;5;238m 369[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] Fall into utype to echo the character we just read...[0m
[38;5;238m 370[0m   [38;5;238mâ”‚[0m 
[38;5;238m 371[0m   [38;5;238mâ”‚[0m 
[38;5;238m 372[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***********************************[0m
[38;5;238m 373[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Write byte to Elf 2000 UART ***[0m
[38;5;238m 374[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** D - byte to write           ***[0m
[38;5;238m 375[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***********************************[0m
[38;5;238m 376[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_utype[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save byte to send onto stack[0m
[38;5;238m 377[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m015h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need line status register of UART[0m
[38;5;238m 378[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m 379[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select UART port[0m
[38;5;238m 380[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m keep stack at empty spot[0m
[38;5;238m 381[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mutype_lp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read status port[0m
[38;5;238m 382[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m020h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m mask for holding register empty[0m
[38;5;238m 383[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mutype_lp[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop until allowd to send character[0m
[38;5;238m 384[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m010h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select data register[0m
[38;5;238m 385[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for out[0m
[38;5;238m 386[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select UART register[0m
[38;5;238m 387[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] reload the original byte[0m
[38;5;238m 388[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write byte to UART[0m
[38;5;238m 389[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m correct for inc on OUT[0m
[38;5;238m 390[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return to caller[0m
[38;5;238m 391[0m   [38;5;238mâ”‚[0m 
[38;5;238m 392[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************[0m
[38;5;238m 393[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Setup UART parameters             ***[0m
[38;5;238m 394[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** D = Comm parameters               ***[0m
[38;5;238m 395[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***  Bits 0-2 = 0 0 0 - 300 baud      ***[0m
[38;5;238m 396[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             0 0 1 - 1200 baud     ***[0m
[38;5;238m 397[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             0 1 0 - 2400 baud     ***[0m
[38;5;238m 398[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             0 1 1 - 4800 baud     ***[0m
[38;5;238m 399[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             1 0 0 - 9600 baud     ***[0m
[38;5;238m 400[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             1 0 1 - 19200 baud    ***[0m
[38;5;238m 401[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             1 1 0 - 38400 baud    ***[0m
[38;5;238m 402[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             1 1 1 - 76800 baud    ***[0m
[38;5;238m 403[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***  bit 3 - reserved for future baud ***[0m
[38;5;238m 404[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          rates                    ***[0m
[38;5;238m 405[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***  Bits 4-5 = 0 0 - 5 bit words     ***[0m
[38;5;238m 406[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             0 1 - 6 bit words     ***[0m
[38;5;238m 407[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             1 0 - 7 bit words     ***[0m
[38;5;238m 408[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             1 1 - 8 bit words     ***[0m
[38;5;238m 409[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***  Bit    6 =   0 - no parity       ***[0m
[38;5;238m 410[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***               1 - parity enabled  ***[0m
[38;5;238m 411[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***  Bit    7 -   0 - odd parity      ***[0m
[38;5;238m 412[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***               1 - even parity     ***[0m
[38;5;238m 413[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=1 - No UART installed ***[0m
[38;5;238m 414[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=0 - success           ***[0m
[38;5;238m 415[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************[0m
[38;5;238m 416[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_stbd[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save a coyp of parameters[0m
[38;5;238m 417[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup line control register of UART[0m
[38;5;238m 418[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m
[38;5;238m 419[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m013h[0m
[38;5;238m 420[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set x back to stack[0m
[38;5;238m 421[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     xri     0ffh                ; check for existance of UART[0m
[38;5;238m 422[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     lbz     no_uart             ; jump if not installed[0m
[38;5;238m 423[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     xri     0ffh                ; reset value[0m
[38;5;238m 424[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m080h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] set DLAB bit[0m
[38;5;238m 425[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store for write[0m
[38;5;238m 426[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write line control register[0m
[38;5;238m 427[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compensate for out[0m
[38;5;238m 428[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     dec     r2                  ; need some workspace[0m
[38;5;238m 429[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] save consumed register[0m
[38;5;238m 430[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 431[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 432[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 433[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get com parameters[0m
[38;5;238m 434[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m7[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m strip all but baud rate bits[0m
[38;5;238m 435[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply by 2[0m
[38;5;238m 436[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and prepare for add[0m
[38;5;238m 437[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;166;226;46mbaudtab[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to diviser table[0m
[38;5;238m 438[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m add in offset[0m
[38;5;238m 439[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into rf[0m
[38;5;238m 440[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;166;226;46mbaudtab[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m high portion of address[0m
[38;5;238m 441[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madci[0m[38;2;248;248;242m    [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] propagate carry[0m
[38;5;238m 442[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 443[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for output[0m
[38;5;238m 444[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select msb of diviser latch[0m
[38;5;238m 445[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m011h[0m
[38;5;238m 446[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to diviser value[0m
[38;5;238m 447[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and write to latch[0m
[38;5;238m 448[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for next register select[0m
[38;5;238m 449[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select lsb of diviser latch[0m
[38;5;238m 450[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m010h[0m
[38;5;238m 451[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set x to diviser table[0m
[38;5;238m 452[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and write to uart[0m
[38;5;238m 453[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set x back to stack[0m
[38;5;238m 454[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     inc     r2                  ; point back to line control value[0m
[38;5;238m 455[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] restore rf[0m
[38;5;238m 456[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 457[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] [0m
[38;5;238m 458[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 459[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 460[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover comm parameters[0m
[38;5;238m 461[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift out baud value[0m
[38;5;238m 462[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m 463[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m 464[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m 465[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0fh[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] clear unneded bits[0m
[38;5;238m 466[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for out[0m
[38;5;238m 467[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to write register select[0m
[38;5;238m 468[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select line control register[0m
[38;5;238m 469[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m013h[0m
[38;5;238m 470[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m X back to stack[0m
[38;5;238m 471[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write new line control register[0m
[38;5;238m 472[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compensate for out[0m
[38;5;238m 473[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] X=P (again!)[0m
[38;5;238m 474[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_SELECT[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] address modem control register[0m
[38;5;238m 475[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m014h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 476[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mUART_DATA[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] clear loopback, set DTR & RTS[0m
[38;5;238m 477[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m03h[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 478[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] back to the stack again[0m
[38;5;238m 479[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal success[0m
[38;5;238m 480[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m 481[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mbaudtab[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;190;132;255m512[0m[38;2;248;248;242m,[0m[38;2;190;132;255m128[0m[38;2;248;248;242m,[0m[38;2;190;132;255m64[0m[38;2;248;248;242m,[0m[38;2;190;132;255m32[0m[38;2;248;248;242m,[0m[38;2;190;132;255m16[0m[38;2;248;248;242m,[0m[38;2;190;132;255m8[0m[38;2;248;248;242m,[0m[38;2;190;132;255m4[0m[38;2;248;248;242m,[0m[38;2;190;132;255m2[0m[38;2;248;248;242m [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 482[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m[38;2;248;248;242m  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m; "#ifdef UART" ...[0m
[38;5;238m 483[0m   [38;5;238mâ”‚[0m 
[38;5;238m 484[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mNVR[0m
[38;5;238m 485[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************[0m
[38;5;238m 486[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   Read a byte from an RTC/NVR register.  The address of the register[0m
[38;5;238m 487[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m is passed inline, after the CALL RTCRDI, and the contents of the RTC/NVR[0m
[38;5;238m 488[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m register is returned in D...[0m
[38;5;238m 489[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************[0m
[38;5;238m 490[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] point to the inline arguments[0m
[38;5;238m 491[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] select the disk/uart/rtc register[0m
[38;5;238m 492[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] back to the regular stack[0m
[38;5;238m 493[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and read the RTC register [0m
[38;5;238m 494[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] return the register value in D[0m
[38;5;238m 495[0m   [38;5;238mâ”‚[0m 
[38;5;238m 496[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************[0m
[38;5;238m 497[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   Write a byte to an RTC/NVR register.  The address of the register is[0m
[38;5;238m 498[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m passed inline, after the CALL RTCWRI, and the byte to be written is passed[0m
[38;5;238m 499[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m in the D register...[0m
[38;5;238m 500[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************[0m
[38;5;238m 501[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrtcwri[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] address the inline arguments[0m
[38;5;238m 502[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] output the register select and skip it[0m
[38;5;238m 503[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] back to the regular stack now[0m
[38;5;238m 504[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] temporarily store the value to output[0m
[38;5;238m 505[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and write it to the RTC/NVR [0m
[38;5;238m 506[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] out increments R(X), so fix that[0m
[38;5;238m 507[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and return[0m
[38;5;238m 508[0m   [38;5;238mâ”‚[0m 
[38;5;238m 509[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************[0m
[38;5;238m 510[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Test if RTC is present    ***[0m
[38;5;238m 511[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=1 present     ***[0m
[38;5;238m 512[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=0 not present ***[0m
[38;5;238m 513[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          d = size         *** [0m
[38;5;238m 514[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]   Note that "size" does not include the bytes reserved for the[0m
[38;5;238m 515[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] clock/calender!  i.e. a "128 byte chip" returns 114 and a "64 byte"[0m
[38;5;238m 516[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] chip returns 50.  This way the size represents the number of bytes[0m
[38;5;238m 517[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] actually usable by the caller, and also, it represents the maximum[0m
[38;5;238m 518[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] length (less checksum) that can be passed to rdnvr/wrnvr...[0m
[38;5;238m 519[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************[0m
[38;5;238m 520[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrtctest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read RTC register 127 first[0m
[38;5;238m 521[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 522[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m127[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 523[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] save RTC loc 127 on the stack[0m
[38;5;238m 524[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] now save RTC register 63[0m
[38;5;238m 525[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ... same as before[0m
[38;5;238m 526[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m63[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 527[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] push RTC loc 63 too[0m
[38;5;238m 528[0m   [38;5;238mâ”‚[0m 
[38;5;238m 529[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   First test to see whether the RTC/NVR exists at all by trying to write[0m
[38;5;238m 530[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m (and successfully read back!) location 63...[0m
[38;5;238m 531[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0ffh[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] complement previous data in loc 63[0m
[38;5;238m 532[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] write it back[0m
[38;5;238m 533[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 534[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m63[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ... to location 63[0m
[38;5;238m 535[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] now try to read RTC loc 63[0m
[38;5;238m 536[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 537[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m63[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 538[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] previous contents are on the stack[0m
[38;5;238m 539[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114madd[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] a number plus its complement[0m
[38;5;238m 540[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] protect original contents of loc 63[0m
[38;5;238m 541[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0ffh[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ... always equals 0FFH[0m
[38;5;238m 542[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mnortc[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] branch if no RTC present[0m
[38;5;238m 543[0m   [38;5;238mâ”‚[0m 
[38;5;238m 544[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Next, check the battery status bit in register 0dh...[0m
[38;5;238m 545[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read register 0x0d[0m
[38;5;238m 546[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 547[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0dh[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 548[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m80h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] is the VRT bit set?[0m
[38;5;238m 549[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mnortc[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] branch if the battery is dead[0m
[38;5;238m 550[0m   [38;5;238mâ”‚[0m 
[38;5;238m 551[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   There are two versions of the NVR - a 64 byte version and a 128 byte[0m
[38;5;238m 552[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m version.  The 64 byte version simply doesn't decode the upper address bit,[0m
[38;5;238m 553[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m so with this chip an attempt to access locations 64..127 simply accesses[0m
[38;5;238m 554[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m locations 0..63 instead.  We can test for a 64 byte chip by writing location[0m
[38;5;238m 555[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m 127 and checking to see if location 63 changes...[0m
[38;5;238m 556[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m00[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] write 0 to location 63[0m
[38;5;238m 557[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 558[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 559[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m63[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 560[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0ffh[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] then write 0FFH to location 127[0m
[38;5;238m 561[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 562[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 563[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m127[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 564[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] now read back location 63[0m
[38;5;238m 565[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 566[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m63[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 567[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrtc64[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] branch if 64 byte chip[0m
[38;5;238m 568[0m   [38;5;238mâ”‚[0m 
[38;5;238m 569[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Here for the 128 byte RTC/NVR with a good battery![0m
[38;5;238m 570[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrtc128[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] pop the previous contents of loc 63[0m
[38;5;238m 571[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 572[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and write it back[0m
[38;5;238m 573[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 574[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m63[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 575[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] now pop location 127[0m
[38;5;238m 576[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 577[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and write that back too[0m
[38;5;238m 578[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 579[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m127[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 580[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m128[0m[38;2;249;38;114m-[0m[38;2;190;132;255m14[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] return the size of the NVR[0m
[38;5;238m 581[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and DF=1 to indicate success[0m
[38;5;238m 582[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 583[0m   [38;5;238mâ”‚[0m 
[38;5;238m 584[0m   [38;5;238mâ”‚[0m 
[38;5;238m 585[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Here for the 64 byte RTC/NVR....[0m
[38;5;238m 586[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrtc64[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] pop the previous contents of loc 63[0m
[38;5;238m 587[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldxa[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 588[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and write it back[0m
[38;5;238m 589[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 590[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m63[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 591[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m                                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] no need to restore location 127[0m
[38;5;238m 592[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m64[0m[38;2;249;38;114m-[0m[38;2;190;132;255m14[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] return the size of the NVR[0m
[38;5;238m 593[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and DF=1 to indicate success[0m
[38;5;238m 594[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 595[0m   [38;5;238mâ”‚[0m 
[38;5;238m 596[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m And here if the RTC doesnt exist or the battery is dead...[0m
[38;5;238m 597[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnortc[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] pop two bytes off the stack[0m
[38;5;238m 598[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 599[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] return the size of the NVR[0m
[38;5;238m 600[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and DF=0 to indicate failure[0m
[38;5;238m 601[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ..[0m
[38;5;238m 602[0m   [38;5;238mâ”‚[0m 
[38;5;238m 603[0m   [38;5;238mâ”‚[0m 
[38;5;238m 604[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ******************************** [0m
[38;5;238m 605[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Read RTC date            ***[0m
[38;5;238m 606[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - buffer for time     ***[0m
[38;5;238m 607[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=0 - success  ***[0m
[38;5;238m 608[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=1 - error    ***[0m
[38;5;238m 609[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             D=0 no RTC   ***[0m
[38;5;238m 610[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***             D=1 bad time ***[0m
[38;5;238m 611[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ********************************[0m
[38;5;238m 612[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_gtod[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if RTC is present[0m
[38;5;238m 613[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtctest[0m
[38;5;238m 614[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrtc_go[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if RTC was found[0m
[38;5;238m 615[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Here if there is no RTC installed...[0m
[38;5;238m 616[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrtc_err[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal error[0m
[38;5;238m 617[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m as no RTC[0m
[38;5;238m 618[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return[0m
[38;5;238m 619[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m And here if the RTC is not set...[0m
[38;5;238m 620[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrtc_notset[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] signal bad time/date[0m
[38;5;238m 621[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] signal error [0m
[38;5;238m 622[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m            [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] return[0m
[38;5;238m 623[0m   [38;5;238mâ”‚[0m 
[38;5;238m 624[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   There are two caveats in reading the clock - the first is that we check[0m
[38;5;238m 625[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m to ensure that 1) the clock is running and that 2) the 24 hour and binary[0m
[38;5;238m 626[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m mode bits are set.  If theres been a previous call to e2k_stod then these[0m
[38;5;238m 627[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m will all be true.  Note that you cant really change these bits while the[0m
[38;5;238m 628[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m clock is running (it can cause anomalies in the count if you do) - you have[0m
[38;5;238m 629[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m to first set the mode bits and then set the time, so thats why we leave it[0m
[38;5;238m 630[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m all up to e2k_stod().[0m
[38;5;238m 631[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrtc_go[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] first read register 0x0a[0m
[38;5;238m 632[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 633[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0ah[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 634[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m70h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] check the DV2/1/0 bits[0m
[38;5;238m 635[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m20h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] make sure the clock is running[0m
[38;5;238m 636[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrtc_notset[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] not runing otherwise[0m
[38;5;238m 637[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] now read register 0x0b[0m
[38;5;238m 638[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 639[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0bh[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 640[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m06h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] make sure the DM and 24 bits are set[0m
[38;5;238m 641[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m06h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] (both bits must be set!)[0m
[38;5;238m 642[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrtc_notset[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] clock is not set otherwise[0m
[38;5;238m 643[0m   [38;5;238mâ”‚[0m 
[38;5;238m 644[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   The second caveat is that we have to be careful _when_ we read the clock.[0m
[38;5;238m 645[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Remember, the RTC hardware potentially changes the seconds, minutes, hours[0m
[38;5;238m 646[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m day, month and year registers any time the clock ticks (i.e. at 23:59:59 on[0m
[38;5;238m 647[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m the last day of the year, all these bytes will change on the next tick!).[0m
[38;5;238m 648[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m If the clock just happens to tick while were in the middle of reading it,[0m
[38;5;238m 649[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m then the date/time we assemble can be off by a minute, an hour, even a year[0m
[38;5;238m 650[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m if were unlucky!  (You might think this is unlikely to happen, and I admit[0m
[38;5;238m 651[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m that it is, but once upon a time I was personally inveolved in fixing a bug[0m
[38;5;238m 652[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m in an embedded system caused by just this situation!  It happens...)[0m
[38;5;238m 653[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Fortunately for us, the DS1287 designers thought of this and they provide[0m
[38;5;238m 654[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m us with a bit, UIP, to signal that an update coming soon.  As long as UIP=0[0m
[38;5;238m 655[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m were guaranteed at least 244us before an update occurs.[0m
[38;5;238m 656[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrtc_w1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] UIP is in register 0x0a[0m
[38;5;238m 657[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 658[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0ah[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 659[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m80h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] wait for UIP to be clear[0m
[38;5;238m 660[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrtc_w1[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 661[0m   [38;5;238mâ”‚[0m 
[38;5;238m 662[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Ok, were safe...  Read the clock...[0m
[38;5;238m 663[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] first the month[0m
[38;5;238m 664[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 665[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m08h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 666[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] store that in the buffer[0m
[38;5;238m 667[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and on to the next byte[0m
[38;5;238m 668[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] next the day of the month[0m
[38;5;238m 669[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 670[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m07h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 671[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 672[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 673[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] year (two digits only)[0m
[38;5;238m 674[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 675[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m09h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 676[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 677[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 678[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] hour (24 hour mode)[0m
[38;5;238m 679[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 680[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m04h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 681[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 682[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 683[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] minute[0m
[38;5;238m 684[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 685[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m02h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 686[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 687[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 688[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and seconds[0m
[38;5;238m 689[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcrdi[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 690[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m00h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 691[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 692[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 693[0m   [38;5;238mâ”‚[0m 
[38;5;238m 694[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m All is well - return DF=0...[0m
[38;5;238m 695[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] indicate succes[0m
[38;5;238m 696[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 697[0m   [38;5;238mâ”‚[0m 
[38;5;238m 698[0m   [38;5;238mâ”‚[0m 
[38;5;238m 699[0m   [38;5;238mâ”‚[0m 
[38;5;238m 700[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ********************************[0m
[38;5;238m 701[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Set RTC date             ***[0m
[38;5;238m 702[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - buffer holding data ***[0m
[38;5;238m 703[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=0 - success  ***[0m
[38;5;238m 704[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=1 - no RTC   ***[0m
[38;5;238m 705[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ********************************[0m
[38;5;238m 706[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_stod[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if RTC is present[0m
[38;5;238m 707[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtctest[0m
[38;5;238m 708[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrtc_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if no RTC is present[0m
[38;5;238m 709[0m   [38;5;238mâ”‚[0m 
[38;5;238m 710[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   The RTC ships from the factory with the clock turned off - this saves[0m
[38;5;238m 711[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m the shelf life of the lithium cell.  Before setting the clock, lets turn[0m
[38;5;238m 712[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m on the oscillator so that it will actually keep time :-)  If the oscillator[0m
[38;5;238m 713[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m is already on, this will do no harm...[0m
[38;5;238m 714[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m20h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] turn ON the clock[0m
[38;5;238m 715[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ... and OFF the SQW output[0m
[38;5;238m 716[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ... which we dont use anyway[0m
[38;5;238m 717[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0ah[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 718[0m   [38;5;238mâ”‚[0m 
[38;5;238m 719[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   Now, set the SET bit, which inhibits the clock from counting.  This[0m
[38;5;238m 720[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m prevents it from accidentally rolling over while were in the middle of[0m
[38;5;238m 721[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m updating the registers!  At the same time, select 24 hour mode, binary[0m
[38;5;238m 722[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m (not BCD) mode, and enable daylight savings time.  The latter choice is[0m
[38;5;238m 723[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m debatable since the chip only knows the DST rules for the USA, and not[0m
[38;5;238m 724[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m even all parts of the US observe DST to start with.  Still, it works for[0m
[38;5;238m 725[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m most customers![0m
[38;5;238m 726[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m86h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] SET, DM, and 24hr[0m
[38;5;238m 727[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 728[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 729[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0bh[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 730[0m   [38;5;238mâ”‚[0m 
[38;5;238m 731[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m   Load the clock registers.  Note that there is no error checking on the[0m
[38;5;238m 732[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m values - if the caller gives bogus values then the count will be[0m
[38;5;238m 733[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m unpredictable![0m
[38;5;238m 734[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] fetch the month[0m
[38;5;238m 735[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ... and update the RTC chip[0m
[38;5;238m 736[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 737[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m08h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 738[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] next the day of the month[0m
[38;5;238m 739[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 740[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 741[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m07h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 742[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] the year[0m
[38;5;238m 743[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 744[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 745[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m09h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 746[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] hour[0m
[38;5;238m 747[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 748[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 749[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m04h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 750[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] minute[0m
[38;5;238m 751[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 752[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 753[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m02h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 754[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] seconds[0m
[38;5;238m 755[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 756[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 757[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m00h[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 758[0m   [38;5;238mâ”‚[0m 
[38;5;238m 759[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Clear the SET bit to allow the clock to run, and were done![0m
[38;5;238m 760[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m07h[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] DM, 24hr and DSE[0m
[38;5;238m 761[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 762[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtcwri[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 763[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m80h[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0bh[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 764[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] return DF=0 for success[0m
[38;5;238m 765[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 766[0m   [38;5;238mâ”‚[0m 
[38;5;238m 767[0m   [38;5;238mâ”‚[0m 
[38;5;238m 768[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************************[0m
[38;5;238m 769[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Read bytes from NVR                      ***[0m
[38;5;238m 770[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF.0 - relative address to start reading ***[0m
[38;5;238m 771[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RD - Destination for bytes               ***[0m
[38;5;238m 772[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RC.0 - count                             ***[0m
[38;5;238m 773[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=0 - success                  ***[0m
[38;5;238m 774[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=1 - no NVR                   ***[0m
[38;5;238m 775[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************************[0m
[38;5;238m 776[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_rdnvr[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for presence of NVR[0m
[38;5;238m 777[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtctest[0m
[38;5;238m 778[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrtc_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m 779[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save RF[0m
[38;5;238m 780[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m 781[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 782[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m 783[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save RD[0m
[38;5;238m 784[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m 785[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m 786[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m 787[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compute checksum[0m
[38;5;238m 788[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mnvr_chk[0m
[38;5;238m 789[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get current checksum[0m
[38;5;238m 790[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mget_chk[0m
[38;5;238m 791[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compare them[0m
[38;5;238m 792[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m 793[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 794[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m
[38;5;238m 795[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mchk_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump on checksum error[0m
[38;5;238m 796[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check high byte as well[0m
[38;5;238m 797[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m 798[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 799[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m
[38;5;238m 800[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mchk_err[0m
[38;5;238m 801[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover RD and RF[0m
[38;5;238m 802[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m 803[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m 804[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m 805[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m 806[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m 807[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 808[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m 809[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 810[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m08eh[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m offset to beginning of general regs.[0m
[38;5;238m 811[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into memory[0m
[38;5;238m 812[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrdnvr_lp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if done[0m
[38;5;238m 813[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrdnvr_dn[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if so[0m
[38;5;238m 814[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write next register address[0m
[38;5;238m 815[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compensate for inc on out[0m
[38;5;238m 816[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set x to destination memory[0m
[38;5;238m 817[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read NVR[0m
[38;5;238m 818[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m increment destination[0m
[38;5;238m 819[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement count[0m
[38;5;238m 820[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point x back to stack[0m
[38;5;238m 821[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] increment the register address[0m
[38;5;238m 822[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 823[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 824[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrdnvr_lp[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back for more[0m
[38;5;238m 825[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrdnvr_dn[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal success[0m
[38;5;238m 826[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m 827[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mchk_err[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover RD and RF[0m
[38;5;238m 828[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m 829[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m 830[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m 831[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m 832[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m 833[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 834[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m 835[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 836[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal an error[0m
[38;5;238m 837[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal bad checksum[0m
[38;5;238m 838[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m 839[0m   [38;5;238mâ”‚[0m 
[38;5;238m 840[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************************[0m
[38;5;238m 841[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Write bytes to NVR                       ***[0m
[38;5;238m 842[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF.0 - relative address to start writing ***[0m
[38;5;238m 843[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RD - source for bytes                    ***[0m
[38;5;238m 844[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RC.0 - count                             ***[0m
[38;5;238m 845[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=0 - success                  ***[0m
[38;5;238m 846[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=1 - no NVR                   ***[0m
[38;5;238m 847[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************************[0m
[38;5;238m 848[0m   [38;5;238mâ”‚[0m [38;2;166;226;46me2k_wrnvr[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for presence of NVR[0m
[38;5;238m 849[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtctest[0m
[38;5;238m 850[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrtc_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m 851[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get starting register[0m
[38;5;238m 852[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m08eh[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m offset to beginning of general regs.[0m
[38;5;238m 853[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into memory[0m
[38;5;238m 854[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mwrnvr_lp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if done[0m
[38;5;238m 855[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mwrnvr_dn[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if so[0m
[38;5;238m 856[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write next register address[0m
[38;5;238m 857[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compensate for inc on out[0m
[38;5;238m 858[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set x to source memory[0m
[38;5;238m 859[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write NVR[0m
[38;5;238m 860[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement count[0m
[38;5;238m 861[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point x back to stack[0m
[38;5;238m 862[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] increment the register address[0m
[38;5;238m 863[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 864[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 865[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mwrnvr_lp[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back for more[0m
[38;5;238m 866[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mwrnvr_dn[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compute new checksum[0m
[38;5;238m 867[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mnvr_chk[0m
[38;5;238m 868[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and write to NVR[0m
[38;5;238m 869[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mset_chk[0m
[38;5;238m 870[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal success[0m
[38;5;238m 871[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m 872[0m   [38;5;238mâ”‚[0m 
[38;5;238m 873[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m 874[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Compute checksum for NVR ram ***[0m
[38;5;238m 875[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: RF - checksum       ***[0m
[38;5;238m 876[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m 877[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnvr_chk[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set initial checksum[0m
[38;5;238m 878[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 879[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 880[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] preserve rc.0[0m
[38;5;238m 881[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 882[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m08eh[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m starting register[0m
[38;5;238m 883[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 884[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get size of nvram[0m
[38;5;238m 885[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtctest[0m
[38;5;238m 886[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m08eh[0m[38;2;249;38;114m-[0m[38;2;190;132;255m2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] setup end[0m
[38;5;238m 887[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m 888[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] point to register address[0m
[38;5;238m 889[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnvr_chklp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] duplicate the byte on the TOS[0m
[38;5;238m 890[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 891[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 892[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select NVR address[0m
[38;5;238m 893[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]     dec     r2                  ; [RLA] correct for out increment[0m
[38;5;238m 894[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and then point to a free byte[0m
[38;5;238m 895[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read NVR byte[0m
[38;5;238m 896[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m add into checksum[0m
[38;5;238m 897[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m
[38;5;238m 898[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 899[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m propagate carry[0m
[38;5;238m 900[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m 901[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 902[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now ring shift left[0m
[38;5;238m 903[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 904[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m
[38;5;238m 905[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 906[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 907[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m
[38;5;238m 908[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 909[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] point to NVR address[0m
[38;5;238m 910[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m retrieve it[0m
[38;5;238m 911[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to next byte[0m
[38;5;238m 912[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store again[0m
[38;5;238m 913[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get end[0m
[38;5;238m 914[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m[38;2;248;248;242m                          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if at end[0m
[38;5;238m 915[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mnvr_chklp[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if not[0m
[38;5;238m 916[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] restore rc.0[0m
[38;5;238m 917[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 918[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m 919[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m 920[0m   [38;5;238mâ”‚[0m 
[38;5;238m 921[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************[0m
[38;5;238m 922[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Set NVR checksum ***[0m
[38;5;238m 923[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - checkshum   ***[0m
[38;5;238m 924[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************[0m
[38;5;238m 925[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mset_chk[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed register[0m
[38;5;238m 926[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m 927[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get size of nvram[0m
[38;5;238m 928[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtctest[0m
[38;5;238m 929[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m8eh[0m[38;2;249;38;114m-[0m[38;2;190;132;255m2[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA][0m
[38;5;238m 930[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m 931[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store for out[0m
[38;5;238m 932[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write register selection port[0m
[38;5;238m 933[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compensate for increment[0m
[38;5;238m 934[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high of checksum[0m
[38;5;238m 935[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for out[0m
[38;5;238m 936[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to NVRAM[0m
[38;5;238m 937[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] compensate for out[0m
[38;5;238m 938[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m next position[0m
[38;5;238m 939[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup address[0m
[38;5;238m 940[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store for out[0m
[38;5;238m 941[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write register selection port[0m
[38;5;238m 942[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compensate for increment[0m
[38;5;238m 943[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get low of checksum[0m
[38;5;238m 944[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for out[0m
[38;5;238m 945[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to NVRAM[0m
[38;5;238m 946[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m 947[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m 948[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m 949[0m   [38;5;238mâ”‚[0m 
[38;5;238m 950[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ******************************[0m
[38;5;238m 951[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Get NVR checksum       ***[0m
[38;5;238m 952[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: RD - checksum ***[0m
[38;5;238m 953[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ******************************[0m
[38;5;238m 954[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mget_chk[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed register[0m
[38;5;238m 955[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m    [0m
[38;5;238m 956[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get size of nvram[0m
[38;5;238m 957[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrtctest[0m
[38;5;238m 958[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m8eh[0m[38;2;249;38;114m-[0m[38;2;190;132;255m2[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] setup address[0m
[38;5;238m 959[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m    [0m
[38;5;238m 960[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store for out[0m
[38;5;238m 961[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compensate for inc[0m
[38;5;238m 962[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] correct for out instruction[0m
[38;5;238m 963[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read NVR [0m
[38;5;238m 964[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put into RD.1[0m
[38;5;238m 965[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move to next address[0m
[38;5;238m 966[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get checksum address[0m
[38;5;238m 967[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store for out[0m
[38;5;238m 968[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compensate for inc[0m
[38;5;238m 969[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] correct for out instruction[0m
[38;5;238m 970[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mNVR_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read NVR [0m
[38;5;238m 971[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put into RD.0[0m
[38;5;238m 972[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover consumed register[0m
[38;5;238m 973[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m     [0m
[38;5;238m 974[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m 975[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m 976[0m   [38;5;238mâ”‚[0m 
[38;5;238m 977[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************************[0m
[38;5;238m 978[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Output 2 digit decimal number with leading 0 ***[0m
[38;5;238m 979[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** D - value to output                          ***[0m
[38;5;238m 980[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - buffer to write value to                ***[0m
[38;5;238m 981[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************************[0m
[38;5;238m 982[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mintout2[0m[38;2;248;248;242m:[0m
[38;5;238m 983[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save value for a moment[0m
[38;5;238m 984[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup count[0m
[38;5;238m 985[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m 986[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m retrieve it[0m
[38;5;238m 987[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mintout2lp[0m[38;2;248;248;242m:[0m
[38;5;238m 988[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m10[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m subtract 10[0m
[38;5;238m 989[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mintout2go[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if too small[0m
[38;5;238m 990[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m increment tens[0m
[38;5;238m 991[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mintout2lp[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and keep looking[0m
[38;5;238m 992[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mintout2go[0m[38;2;248;248;242m:[0m
[38;5;238m 993[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m10[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m make positive again[0m
[38;5;238m 994[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save units[0m
[38;5;238m 995[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get tens[0m
[38;5;238m 996[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m0[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert to ascii[0m
[38;5;238m 997[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into buffer[0m
[38;5;238m 998[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m 999[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover units[0m
[38;5;238m1000[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m0[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert to ascii[0m
[38;5;238m1001[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and store into buffer[0m
[38;5;238m1002[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1003[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m1004[0m   [38;5;238mâ”‚[0m 
[38;5;238m1005[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1006[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Convert packed date to ascii ***[0m
[38;5;238m1007[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RD - pointer to packed date  ***[0m
[38;5;238m1008[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - pointer to buffer       ***[0m
[38;5;238m1009[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1010[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdttoas[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m retrieve month[0m
[38;5;238m1011[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m output it[0m
[38;5;238m1012[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mintout2[0m
[38;5;238m1013[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m/[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now a slash[0m
[38;5;238m1014[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into buffer[0m
[38;5;238m1015[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1016[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m retrieve day[0m
[38;5;238m1017[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m output it[0m
[38;5;238m1018[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mintout2[0m
[38;5;238m1019[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m/[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now a slash[0m
[38;5;238m1020[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into buffer[0m
[38;5;238m1021[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1022[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] get year[0m
[38;5;238m1023[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save contents of RD[0m
[38;5;238m1024[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m180[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m add base of 1972[0m
[38;5;238m1025[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1026[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save high byte[0m
[38;5;238m1027[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mstxd[0m
[38;5;238m1028[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m7[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m high byte of 1972[0m
[38;5;238m1029[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madci[0m[38;2;248;248;242m    [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m propagate the carry[0m
[38;5;238m1030[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1031[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m output the year[0m
[38;5;238m1032[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_uintout[0m
[38;5;238m1033[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write terminator[0m
[38;5;238m1034[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1035[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover rd[0m
[38;5;238m1036[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldxa[0m
[38;5;238m1037[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1038[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldx[0m
[38;5;238m1039[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1040[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1041[0m   [38;5;238mâ”‚[0m 
[38;5;238m1042[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1043[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Convert packed time to ascii ***[0m
[38;5;238m1044[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RD - pointer to packed time  ***[0m
[38;5;238m1045[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - pointer to buffer       ***[0m
[38;5;238m1046[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1047[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtmtoas[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m [0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m space after year[0m
[38;5;238m1048[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into buffer[0m
[38;5;238m1049[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1050[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get hour[0m
[38;5;238m1051[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m output it[0m
[38;5;238m1052[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mintout2[0m
[38;5;238m1053[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m:[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now a colon[0m
[38;5;238m1054[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into buffer[0m
[38;5;238m1055[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1056[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get minutes[0m
[38;5;238m1057[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m output it[0m
[38;5;238m1058[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mintout2[0m
[38;5;238m1059[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m:[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now a colon[0m
[38;5;238m1060[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into buffer[0m
[38;5;238m1061[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1062[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get seconds[0m
[38;5;238m1063[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m output it[0m
[38;5;238m1064[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mintout2[0m
[38;5;238m1065[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m1066[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write terminator[0m
[38;5;238m1067[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1068[0m   [38;5;238mâ”‚[0m 
[38;5;238m1069[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1070[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Convert ascii date to packed ***[0m
[38;5;238m1071[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - pointer to ascii date   ***[0m
[38;5;238m1072[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RA - destination address     ***[0m
[38;5;238m1073[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1074[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mastodt[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed register[0m
[38;5;238m1075[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mstxd[0m
[38;5;238m1076[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1077[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mstxd[0m
[38;5;238m1078[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert first number[0m
[38;5;238m1079[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46matoi[0m
[38;5;238m1080[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get value[0m
[38;5;238m1081[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m13[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if valid month[0m
[38;5;238m1082[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mdterr[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if invalid[0m
[38;5;238m1083[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover number[0m
[38;5;238m1084[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into output[0m
[38;5;238m1085[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and increment[0m
[38;5;238m1086[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next char[0m
[38;5;238m1087[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m/[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m must be a slash[0m
[38;5;238m1088[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mdterr[0m
[38;5;238m1089[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next number[0m
[38;5;238m1090[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46matoi[0m
[38;5;238m1091[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get value[0m
[38;5;238m1092[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m32[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check next number[0m
[38;5;238m1093[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mdterr[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if invalid[0m
[38;5;238m1094[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover value[0m
[38;5;238m1095[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and save in output[0m
[38;5;238m1096[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and increment[0m
[38;5;238m1097[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next char[0m
[38;5;238m1098[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m/[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m must be a slash[0m
[38;5;238m1099[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mdterr[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m1100[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now convert year[0m
[38;5;238m1101[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46matoi[0m
[38;5;238m1102[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high byte[0m
[38;5;238m1103[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46my4[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if 4 digit year[0m
[38;5;238m1104[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to check y2k[0m
[38;5;238m1105[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m72[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to check for y2k threshold[0m
[38;5;238m1106[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46my2k[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if 2000+[0m
[38;5;238m1107[0m   [38;5;238mâ”‚[0m [38;2;166;226;46masdtend[0m[38;2;248;248;242m:[0m
[38;5;238m1108[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into output[0m
[38;5;238m1109[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move to next position[0m
[38;5;238m1110[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal valid date[0m
[38;5;238m1111[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mget_rd[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover RD and return[0m
[38;5;238m1112[0m   [38;5;238mâ”‚[0m [38;2;166;226;46my4[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m subtract 1972[0m
[38;5;238m1113[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m180[0m
[38;5;238m1114[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46masdtend[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and store[0m
[38;5;238m1115[0m   [38;5;238mâ”‚[0m [38;2;166;226;46my2k[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover value[0m
[38;5;238m1116[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m28[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m add in offset[0m
[38;5;238m1117[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46masdtend[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and continue processing[0m
[38;5;238m1118[0m   [38;5;238mâ”‚[0m 
[38;5;238m1119[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1120[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Convert ascii time to packed ***[0m
[38;5;238m1121[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - pointer to ascii time   ***[0m
[38;5;238m1122[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RA - destination address     ***[0m
[38;5;238m1123[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1124[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mastotm[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed register[0m
[38;5;238m1125[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mstxd[0m
[38;5;238m1126[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1127[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mstxd[0m
[38;5;238m1128[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move past any spaces[0m
[38;5;238m1129[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mltrim[0m
[38;5;238m1130[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert hours[0m
[38;5;238m1131[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46matoi[0m
[38;5;238m1132[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check if valid[0m
[38;5;238m1133[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m24[0m
[38;5;238m1134[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mdterr[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m1135[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store value into result[0m
[38;5;238m1136[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1137[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1138[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next char[0m
[38;5;238m1139[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m:[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m must be a colon[0m
[38;5;238m1140[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mdterr[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m1141[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert minutes[0m
[38;5;238m1142[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46matoi[0m
[38;5;238m1143[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for valid[0m
[38;5;238m1144[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m60[0m
[38;5;238m1145[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mdterr[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m1146[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store value into result[0m
[38;5;238m1147[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1148[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1149[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next char[0m
[38;5;238m1150[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m keep a copy[0m
[38;5;238m1151[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m:[0m[38;2;230;219;116m'[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for colon[0m
[38;5;238m1152[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mis_sec[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if seconds are provided[0m
[38;5;238m1153[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to check for valid characters[0m
[38;5;238m1154[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mno_sec[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if terminator[0m
[38;5;238m1155[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m32[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m otherwise must be a space[0m
[38;5;238m1156[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mdterr[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump on other chars to err[0m
[38;5;238m1157[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mno_sec[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set seconds to zero[0m
[38;5;238m1158[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtm_cont[0m[38;2;248;248;242m:[0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1159[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal no error[0m
[38;5;238m1160[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mget_rd[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover consumed register[0m
[38;5;238m1161[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldxa[0m
[38;5;238m1162[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1163[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mldx[0m
[38;5;238m1164[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1165[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1166[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mis_sec[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert seconds[0m
[38;5;238m1167[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46matoi[0m
[38;5;238m1168[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for valid[0m
[38;5;238m1169[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m60[0m
[38;5;238m1170[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mdterr[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not valid[0m
[38;5;238m1171[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store answer and return[0m
[38;5;238m1172[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtm_cont[0m
[38;5;238m1173[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdterr[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal an error[0m
[38;5;238m1174[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m        [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mget_rd[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover RD and return[0m
[38;5;238m1175[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m[38;2;248;248;242m  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m; "#ifdef NVR" ...[0m
[38;5;238m1176[0m   [38;5;238mâ”‚[0m 
[38;5;238m1177[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mEIDE[0m
[38;5;238m1178[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ********************************[0m
[38;5;238m1179[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Select master ide device ***[0m
[38;5;238m1180[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ********************************[0m
[38;5;238m1181[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmaster[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait til drive ready[0m
[38;5;238m1182[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwaitrdy[0m
[38;5;238m1183[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46msel_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if timedout[0m
[38;5;238m1184[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for immediate outs[0m
[38;5;238m1185[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select device register[0m
[38;5;238m1186[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m6[0m
[38;5;238m1187[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now output code for master[0m
[38;5;238m1188[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m0[0m
[38;5;238m1189[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m restore x register[0m
[38;5;238m1190[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal no error[0m
[38;5;238m1191[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1192[0m   [38;5;238mâ”‚[0m 
[38;5;238m1193[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msel_err[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal an error[0m
[38;5;238m1194[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1195[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *******************************[0m
[38;5;238m1196[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Select slave ide device ***[0m
[38;5;238m1197[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *******************************[0m
[38;5;238m1198[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mslave[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait til drive ready[0m
[38;5;238m1199[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwaitrdy[0m
[38;5;238m1200[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46msel_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if timedout[0m
[38;5;238m1201[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for immediate outs[0m
[38;5;238m1202[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select device register[0m
[38;5;238m1203[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m6[0m
[38;5;238m1204[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now output code for slave[0m
[38;5;238m1205[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m010h[0m
[38;5;238m1206[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m restore x register[0m
[38;5;238m1207[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal no error[0m
[38;5;238m1208[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1209[0m   [38;5;238mâ”‚[0m 
[38;5;238m1210[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1211[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** get ide identity information ***[0m
[38;5;238m1212[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - pointer to buffer       ***[0m
[38;5;238m1213[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RD.0 = 0 master              ***[0m
[38;5;238m1214[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***      = 1 slave               ***[0m
[38;5;238m1215[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=1 drive error    ***[0m
[38;5;238m1216[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ************************************[0m
[38;5;238m1217[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mide_ident[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save buffer position[0m
[38;5;238m1218[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1219[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1220[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1221[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read drive data[0m
[38;5;238m1222[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mide_id[0m
[38;5;238m1223[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover buffer[0m
[38;5;238m1224[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m1225[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1226[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m1227[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1228[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46msel_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if drive error[0m
[38;5;238m1229[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mswap[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m perform byte swaps[0m
[38;5;238m1230[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m          [0m
[38;5;238m1231[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mide_id[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1232[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mid_master[0m
[38;5;238m1233[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select slave drive[0m
[38;5;238m1234[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mslave[0m
[38;5;238m1235[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46msel_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump on error[0m
[38;5;238m1236[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mident_go[0m
[38;5;238m1237[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mid_master[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select master[0m
[38;5;238m1238[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmaster[0m
[38;5;238m1239[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46msel_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump on error[0m
[38;5;238m1240[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mident_go[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed registers[0m
[38;5;238m1241[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1242[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1243[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1244[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait for drive to be ready[0m
[38;5;238m1245[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwaitrdy[0m
[38;5;238m1246[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46msel_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump on timeout[0m
[38;5;238m1247[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for outs[0m
[38;5;238m1248[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select command port[0m
[38;5;238m1249[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m7[0m
[38;5;238m1250[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m issue get identity command[0m
[38;5;238m1251[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m0ech[0m
[38;5;238m1252[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m reset stack[0m
[38;5;238m1253[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait for DRQ[0m
[38;5;238m1254[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdrqloop[0m
[38;5;238m1255[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_read[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read drive data[0m
[38;5;238m1256[0m   [38;5;238mâ”‚[0m 
[38;5;238m1257[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mswap[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup counter[0m
[38;5;238m1258[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1259[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mswap_lp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get first byte[0m
[38;5;238m1260[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m keep a copy[0m
[38;5;238m1261[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get second byte[0m
[38;5;238m1262[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m keep a copy[0m
[38;5;238m1263[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get first byte[0m
[38;5;238m1264[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write into 2nd position[0m
[38;5;238m1265[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point back to first byte[0m
[38;5;238m1266[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get 2nd byte[0m
[38;5;238m1267[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write into first position[0m
[38;5;238m1268[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to next word[0m
[38;5;238m1269[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1270[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement count[0m
[38;5;238m1271[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if done[0m
[38;5;238m1272[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mswap_lp[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if not[0m
[38;5;238m1273[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m otherwise return to caller[0m
[38;5;238m1274[0m   [38;5;238mâ”‚[0m 
[38;5;238m1275[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************[0m
[38;5;238m1276[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Determine size of hard drive      ***[0m
[38;5;238m1277[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RD.0 = 0 - master drive           ***[0m
[38;5;238m1278[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RD.0 = 1 - slave drive            ***[0m
[38;5;238m1279[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: RF - size of drive in MB ***[0m
[38;5;238m1280[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***               0=no drive          ***[0m
[38;5;238m1281[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************[0m
[38;5;238m1282[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mide_size[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get selected drive[0m
[38;5;238m1283[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46msz_master[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if master is selected[0m
[38;5;238m1284[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select slave drive[0m
[38;5;238m1285[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mslave[0m
[38;5;238m1286[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46msize_go[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m then continue[0m
[38;5;238m1287[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msz_master[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select master drive[0m
[38;5;238m1288[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmaster[0m
[38;5;238m1289[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msize_go[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for immediate out[0m
[38;5;238m1290[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select status register[0m
[38;5;238m1291[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m07h[0m
[38;5;238m1292[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m reset stack[0m
[38;5;238m1293[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for failure count[0m
[38;5;238m1294[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1295[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1296[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrdyloopz[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read status port[0m
[38;5;238m1297[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0c0h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m mask for BSY and RDY[0m
[38;5;238m1298[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m040h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m want only RDY bit[0m
[38;5;238m1299[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46msz_ready[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if drive is ready[0m
[38;5;238m1300[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement timetout[0m
[38;5;238m1301[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check if timeout occurred[0m
[38;5;238m1302[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrdyloopz[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m1303[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1304[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrdyloopz[0m
[38;5;238m1305[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signify no drive[0m
[38;5;238m1306[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1307[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1308[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1309[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msz_ready[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m issued commands to perform an ident[0m
[38;5;238m1310[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select command register[0m
[38;5;238m1311[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m07h[0m
[38;5;238m1312[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m issue identify command[0m
[38;5;238m1313[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m0ech[0m
[38;5;238m1314[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m pont x back to stack[0m
[38;5;238m1315[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait for DRQ[0m
[38;5;238m1316[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdrqloop[0m
[38;5;238m1317[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now setup data register[0m
[38;5;238m1318[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m
[38;5;238m1319[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m0[0m
[38;5;238m1320[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m x back to stack[0m
[38;5;238m1321[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m120[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to throw away 120 bytes[0m
[38;5;238m1322[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1323[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msize_lp1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read byte from drive[0m
[38;5;238m1324[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement count[0m
[38;5;238m1325[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if done[0m
[38;5;238m1326[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46msize_lp1[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if not[0m
[38;5;238m1327[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read 4 bytes into r8:r7[0m
[38;5;238m1328[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1329[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m
[38;5;238m1330[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1331[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m
[38;5;238m1332[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1333[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m
[38;5;238m1334[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1335[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to read 388 more bytes[0m
[38;5;238m1336[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1337[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m132[0m
[38;5;238m1338[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1339[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msize_lp2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read byte[0m
[38;5;238m1340[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement count[0m
[38;5;238m1341[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if done[0m
[38;5;238m1342[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46msize_lp2[0m
[38;5;238m1343[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check high byte[0m
[38;5;238m1344[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46msize_lp2[0m
[38;5;238m1345[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need 11 shift to convert to MB[0m
[38;5;238m1346[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1347[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1348[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1349[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1350[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m 8 shift are now done[0m
[38;5;238m1351[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m3[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need 3 more[0m
[38;5;238m1352[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1353[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msize_lp3[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift whole number right by 1[0m
[38;5;238m1354[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m1355[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1356[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1357[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshrc[0m
[38;5;238m1358[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1359[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1360[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshrc[0m
[38;5;238m1361[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1362[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement count[0m
[38;5;238m1363[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if done[0m
[38;5;238m1364[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46msize_lp3[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m1365[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m transfer result[0m
[38;5;238m1366[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1367[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1368[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1369[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1370[0m   [38;5;238mâ”‚[0m 
[38;5;238m1371[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***********************************[0m
[38;5;238m1372[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Check for valid boot loader ***[0m
[38;5;238m1373[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***********************************[0m
[38;5;238m1374[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mbtcheck[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to boot code[0m
[38;5;238m1375[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1376[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m1377[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1378[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m041h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m number of bytes to check[0m
[38;5;238m1379[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1380[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup initial value[0m
[38;5;238m1381[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1382[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point X to boot code[0m
[38;5;238m1383[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mbtchk_lp[0m[38;2;248;248;242m:[0m
[38;5;238m1384[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get value[0m
[38;5;238m1385[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m add in next byte[0m
[38;5;238m1386[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move pointer[0m
[38;5;238m1387[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift high byte into DF[0m
[38;5;238m1388[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move bits back[0m
[38;5;238m1389[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m ring shift now done[0m
[38;5;238m1390[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save value[0m
[38;5;238m1391[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement byte count[0m
[38;5;238m1392[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if done[0m
[38;5;238m1393[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mbtchk_lp[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if not[0m
[38;5;238m1394[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point X back to stack[0m
[38;5;238m1395[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get number[0m
[38;5;238m1396[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m060h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check against check value[0m
[38;5;238m1397[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46merr[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump on mismatch to error[0m
[38;5;238m1398[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal good[0m
[38;5;238m1399[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1400[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m[38;2;248;248;242m  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m; "#ifdef EIDE" ...[0m
[38;5;238m1401[0m   [38;5;238mâ”‚[0m 
[38;5;238m1402[0m   [38;5;238mâ”‚[0m 
[38;5;238m1403[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************************************[0m
[38;5;238m1404[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m * [RLA] Extended BIOS vectors ...                              *[0m
[38;5;238m1405[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m * [RLA]   This is probably obvious, but DON'T CHANGE THE ORDER *[0m
[38;5;238m1406[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m * [RLA] OF THESE VECTORS!!!                                    *[0m
[38;5;238m1407[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****************************************************************[0m
[38;5;238m1408[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0800h[0m
[38;5;238m1409[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_bread[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mread[0m
[38;5;238m1410[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_btype[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtype[0m
[38;5;238m1411[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_btest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mbrktest[0m
[38;5;238m1412[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m
[38;5;238m1413[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_utype[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_utype[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] type console character via UART[0m
[38;5;238m1414[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_uread[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_uread[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read console character via UART[0m
[38;5;238m1415[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_utest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_utest[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] test UART for character available[0m
[38;5;238m1416[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_usetbd[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_stbd[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] set UART baud rate and character forma[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mt[0m
[38;5;238m1417[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m1418[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_utype[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1419[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_uread[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1420[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_utest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1421[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_usetbd[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1422[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m1423[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mNVR[0m
[38;5;238m1424[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_gettod[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_gtod[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] get RTC time and date[0m
[38;5;238m1425[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_settod[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_stod[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] set RTC time and date[0m
[38;5;238m1426[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_rdnvr[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_rdnvr[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] read NVR data[0m
[38;5;238m1427[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_wrnvr[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_wrnvr[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] write NVR data[0m
[38;5;238m1428[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m1429[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_gettod[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1430[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_settod[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1431[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_rdnvr[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1432[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_wrnvr[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1433[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m1434[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mEIDE[0m
[38;5;238m1435[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_idesize[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_size[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] return the size of attached IDE drive[0m
[38;5;238m1436[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_ideid[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_ident[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] return the manufacturer of IDE drive[0m
[38;5;238m1437[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m1438[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_idesize[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1439[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_ideid[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1440[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m1441[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mNVR[0m
[38;5;238m1442[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_dttoas[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mdttoas[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] convert date to ASCII[0m
[38;5;238m1443[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_tmtoas[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtmtoas[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] convert time to ASCII[0m
[38;5;238m1444[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_rtctest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrtctest[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] test if NVR/RTC present[0m
[38;5;238m1445[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_astodt[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mastodt[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] parse ASCII date[0m
[38;5;238m1446[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_astotm[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mastotm[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] parse ASCII time[0m
[38;5;238m1447[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_nvrcchk[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mnvr_chk[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] compute NVR checksum[0m
[38;5;238m1448[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m1449[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_dttoas[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1450[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_tmtoas[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1451[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_rtctest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1452[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_astodt[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1453[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_astotm[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1454[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_nvrcchk[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46merr[0m
[38;5;238m1455[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m1456[0m   [38;5;238mâ”‚[0m 
[38;5;238m1457[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** rf - pointer to ascii string[0m
[38;5;238m1458[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** returns: rf - first non-numeric character[0m
[38;5;238m1459[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          RD - number[0m
[38;5;238m1460[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF = 1 if first character non-numeric [0m
[38;5;238m1461[0m   [38;5;238mâ”‚[0m [38;2;166;226;46matoi[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m clear answer[0m
[38;5;238m1462[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1463[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1464[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signify positive number[0m
[38;5;238m1465[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get first value[0m
[38;5;238m1466[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check if numeric[0m
[38;5;238m1467[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misnum[0m
[38;5;238m1468[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46matoicnt[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if so[0m
[38;5;238m1469[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m-[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for minus[0m
[38;5;238m1470[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46matoicnt[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if so[0m
[38;5;238m1471[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal number error[0m
[38;5;238m1472[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m1473[0m   [38;5;238mâ”‚[0m [38;2;166;226;46matoicnt[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get first bytr[0m
[38;5;238m1474[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m-[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for negative[0m
[38;5;238m1475[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46matoilp[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not negative[0m
[38;5;238m1476[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signify negative number[0m
[38;5;238m1477[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m1478[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move past - sign[0m
[38;5;238m1479[0m   [38;5;238mâ”‚[0m [38;2;166;226;46matoilp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from input[0m
[38;5;238m1480[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for number[0m
[38;5;238m1481[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misnum[0m
[38;5;238m1482[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46matoidn[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m1483[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m make a copy for add[0m
[38;5;238m1484[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1485[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply by 2[0m
[38;5;238m1486[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m TOS now has copy of number[0m
[38;5;238m1487[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply by 2[0m
[38;5;238m1488[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmul2[0m
[38;5;238m1489[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply by 4[0m
[38;5;238m1490[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmul2[0m
[38;5;238m1491[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to adds[0m
[38;5;238m1492[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply by 5 (add TOS)[0m
[38;5;238m1493[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m
[38;5;238m1494[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1495[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to msb[0m
[38;5;238m1496[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1497[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madc[0m
[38;5;238m1498[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1499[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply by 10[0m
[38;5;238m1500[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmul2[0m
[38;5;238m1501[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from buffer[0m
[38;5;238m1502[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m0[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert to binary[0m
[38;5;238m1503[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for addition[0m
[38;5;238m1504[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m add in new digit[0m
[38;5;238m1505[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m
[38;5;238m1506[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1507[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1508[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madci[0m[38;2;248;248;242m    [0m[38;2;190;132;255m0[0m
[38;5;238m1509[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1510[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46matoilp[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back for next character[0m
[38;5;238m1511[0m   [38;5;238mâ”‚[0m [38;2;166;226;46matoidn[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal valid number[0m
[38;5;238m1512[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m1513[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmul2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply number by 2[0m
[38;5;238m1514[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m
[38;5;238m1515[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1516[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1517[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m
[38;5;238m1518[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1519[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1520[0m   [38;5;238mâ”‚[0m 
[38;5;238m1521[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** convert binary number to ascii[0m
[38;5;238m1522[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** RD - number to convert[0m
[38;5;238m1523[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** RF - buffer to store[0m
[38;5;238m1524[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** Returns: RF - last postion+1[0m
[38;5;238m1525[0m   [38;5;238mâ”‚[0m [38;2;166;226;46muintout[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mpositive[0m
[38;5;238m1526[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mintout[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point X to stack[0m
[38;5;238m1527[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high of number[0m
[38;5;238m1528[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m128[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m mask all bit sign bit[0m
[38;5;238m1529[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mpositive[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if number is positive[0m
[38;5;238m1530[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m-[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need a minus sign[0m
[38;5;238m1531[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into output[0m
[38;5;238m1532[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1533[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get low byte[0m
[38;5;238m1534[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store it[0m
[38;5;238m1535[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to subtract from 0[0m
[38;5;238m1536[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m
[38;5;238m1537[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put back[0m
[38;5;238m1538[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high byte[0m
[38;5;238m1539[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into memory[0m
[38;5;238m1540[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m still subtracting from zero[0m
[38;5;238m1541[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msmb[0m[38;2;248;248;242m     [0m
[38;5;238m1542[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and put back [0m
[38;5;238m1543[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mpositive[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed registers[0m
[38;5;238m1544[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1545[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1546[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1547[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed registers[0m
[38;5;238m1548[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1549[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1550[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1551[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed registers[0m
[38;5;238m1552[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1553[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1554[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1555[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;166;226;46mnumbers[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to numbers[0m
[38;5;238m1556[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1557[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;166;226;46mnumbers[0m
[38;5;238m1558[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1559[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get first division[0m
[38;5;238m1560[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1561[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1562[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1563[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m leading zero flag[0m
[38;5;238m1564[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store onto stack[0m
[38;5;238m1565[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnxtiter[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m star count at zero[0m
[38;5;238m1566[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into low of r8[0m
[38;5;238m1567[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdivlp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get low of number to subtrace[0m
[38;5;238m1568[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into memory[0m
[38;5;238m1569[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get low of number[0m
[38;5;238m1570[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m[38;2;248;248;242m                          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m subtract[0m
[38;5;238m1571[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into temp space[0m
[38;5;238m1572[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high of subtraction[0m
[38;5;238m1573[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into memory[0m
[38;5;238m1574[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high of number[0m
[38;5;238m1575[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msmb[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m perform subtract[0m
[38;5;238m1576[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mnomore[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if subtraction was too large[0m
[38;5;238m1577[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store result[0m
[38;5;238m1578[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1579[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1580[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m increment count[0m
[38;5;238m1581[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdivlp[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and loop back[0m
[38;5;238m1582[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnomore[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point back to leading zero flag[0m
[38;5;238m1583[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1584[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mnonzero[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not zero[0m
[38;5;238m1585[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get flag[0m
[38;5;238m1586[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mallow0[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if no longer zero[0m
[38;5;238m1587[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m keep leading zero flag[0m
[38;5;238m1588[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mfindnxt[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m skip output[0m
[38;5;238m1589[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mallow0[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover the zero[0m
[38;5;238m1590[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnonzero[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m30h[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert to ascii[0m
[38;5;238m1591[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into buffer[0m
[38;5;238m1592[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1593[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to set leading flag[0m
[38;5;238m1594[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store it[0m
[38;5;238m1595[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mfindnxt[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m subtract 1 for zero check[0m
[38;5;238m1596[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for end[0m
[38;5;238m1597[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mintdone[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if done[0m
[38;5;238m1598[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next number[0m
[38;5;238m1599[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1600[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1601[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1602[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if at last number[0m
[38;5;238m1603[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mnxtiter[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not [0m
[38;5;238m1604[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set leading flag[0m
[38;5;238m1605[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m
[38;5;238m1606[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1607[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mnxtiter[0m
[38;5;238m1608[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mintdone[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put x back where it belongs[0m
[38;5;238m1609[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover consumed registers[0m
[38;5;238m1610[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m1611[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1612[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m1613[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1614[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m1615[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1616[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m1617[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1618[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m1619[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1620[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m1621[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m1622[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m1623[0m   [38;5;238mâ”‚[0m 
[38;5;238m1624[0m   [38;5;238mâ”‚[0m 
[38;5;238m1625[0m   [38;5;238mâ”‚[0m 
[38;5;238m1626[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0900h[0m
[38;5;238m1627[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mMCHIP[0m
[38;5;238m1628[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mbuffer[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0fc00h[0m
[38;5;238m1629[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m1630[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mbuffer[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;190;132;255m03[0m
[38;5;238m1631[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m1632[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mminimon[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;166;226;46mstart[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup main pc[0m
[38;5;238m1633[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m1634[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;166;226;46mstart[0m
[38;5;238m1635[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m1636[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mMCHIP[0m
[38;5;238m1637[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0fdh[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup stack[0m
[38;5;238m1638[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m1639[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0ffh[0m
[38;5;238m1640[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m1641[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m1642[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup stack[0m
[38;5;238m1643[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m1644[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0ffh[0m
[38;5;238m1645[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m1646[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m1647[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m1648[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mf_initcall[0m
[38;5;238m1649[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mstart[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m initialize baud setting[0m
[38;5;238m1650[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_setbd[0m
[38;5;238m1651[0m   [38;5;238mâ”‚[0m 
[38;5;238m1652[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmainlp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;166;226;46mprompt[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get address of prompt[0m
[38;5;238m1653[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1654[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;166;226;46mprompt[0m
[38;5;238m1655[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1656[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m display prompt[0m
[38;5;238m1657[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_msg[0m
[38;5;238m1658[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m1659[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mloadbuf[0m
[38;5;238m1660[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get input from user[0m
[38;5;238m1661[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_input[0m
[38;5;238m1662[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m1663[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdocrlf[0m
[38;5;238m1664[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m1665[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mloadbuf[0m
[38;5;238m1666[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get first byte[0m
[38;5;238m1667[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save it[0m
[38;5;238m1668[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m obtain address[0m
[38;5;238m1669[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_hexin[0m
[38;5;238m1670[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move to address var[0m
[38;5;238m1671[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1672[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1673[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1674[0m   [38;5;238mâ”‚[0m 
[38;5;238m1675[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m retrieve command[0m
[38;5;238m1676[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m33[0m
[38;5;238m1677[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mstoresp[0m
[38;5;238m1678[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m28[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m look for copy command[0m
[38;5;238m1679[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mcopy[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if found[0m
[38;5;238m1680[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m2[0m
[38;5;238m1681[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mexamine[0m
[38;5;238m1682[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m
[38;5;238m1683[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmainlp[0m
[38;5;238m1684[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrun[0m[38;2;248;248;242m:[0m[38;2;248;248;242m       [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move to address var[0m
[38;5;238m1685[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m1686[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1687[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m1688[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m1689[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m1690[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m
[38;5;238m1691[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mexamine[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m8[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set count to 128 bytes[0m
[38;5;238m1692[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1693[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mexloop1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get address[0m
[38;5;238m1694[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m transfer for output[0m
[38;5;238m1695[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1696[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1697[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m1698[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mloadbuf[0m
[38;5;238m1699[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put address into output[0m
[38;5;238m1700[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_hexout4[0m
[38;5;238m1701[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m:[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m want a colon[0m
[38;5;238m1702[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1703[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1704[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m16[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m 16 bytes per line[0m
[38;5;238m1705[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put into secondary counter[0m
[38;5;238m1706[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mexloop2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m [0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m output a space[0m
[38;5;238m1707[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1708[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1709[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next byte from memory[0m
[38;5;238m1710[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for output[0m
[38;5;238m1711[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert for output[0m
[38;5;238m1712[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_hexout2[0m
[38;5;238m1713[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrment line count[0m
[38;5;238m1714[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get count[0m
[38;5;238m1715[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mexloop2[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if not done[0m
[38;5;238m1716[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need terminator[0m
[38;5;238m1717[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1718[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m1719[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mloadbuf[0m
[38;5;238m1720[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m output the line[0m
[38;5;238m1721[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_msg[0m
[38;5;238m1722[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m1723[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdocrlf[0m
[38;5;238m1724[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement line count[0m
[38;5;238m1725[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get count[0m
[38;5;238m1726[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mexloop1[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if not all lines printed[0m
[38;5;238m1727[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmainlp[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to main loop[0m
[38;5;238m1728[0m   [38;5;238mâ”‚[0m 
[38;5;238m1729[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mstoresp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from input[0m
[38;5;238m1730[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmainlp[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if found[0m
[38;5;238m1731[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m33[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for less than space[0m
[38;5;238m1732[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mstorec[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not space[0m
[38;5;238m1733[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to next character[0m
[38;5;238m1734[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mstoresp[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and keep moving past spaces[0m
[38;5;238m1735[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mstorec[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert next number[0m
[38;5;238m1736[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_hexin[0m
[38;5;238m1737[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get converted byt[0m
[38;5;238m1738[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into memory[0m
[38;5;238m1739[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to next position[0m
[38;5;238m1740[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mstoresp[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and do next character[0m
[38;5;238m1741[0m   [38;5;238mâ”‚[0m 
[38;5;238m1742[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mcopy[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move source[0m
[38;5;238m1743[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1744[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m1745[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1746[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move past spaces[0m
[38;5;238m1747[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_ltrim[0m
[38;5;238m1748[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get destination address[0m
[38;5;238m1749[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_hexin[0m
[38;5;238m1750[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m transfer to r9[0m
[38;5;238m1751[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1752[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1753[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1754[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move past spaces[0m
[38;5;238m1755[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_ltrim[0m
[38;5;238m1756[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get source address[0m
[38;5;238m1757[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_hexin[0m
[38;5;238m1758[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m transfer to rc[0m
[38;5;238m1759[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1760[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1761[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1762[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmovelp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for zero[0m
[38;5;238m1763[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mdomove[0m
[38;5;238m1764[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1765[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mdomove[0m
[38;5;238m1766[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdone[0m
[38;5;238m1767[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdomove[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m1768[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1769[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m1770[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m1771[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmovelp[0m
[38;5;238m1772[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdone[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmainlp[0m
[38;5;238m1773[0m   [38;5;238mâ”‚[0m 
[38;5;238m1774[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mloadbuf[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;166;226;46mbuffer[0m
[38;5;238m1775[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1776[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;166;226;46mbuffer[0m
[38;5;238m1777[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1778[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m
[38;5;238m1779[0m   [38;5;238mâ”‚[0m 
[38;5;238m1780[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdocrlf[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;166;226;46mcrlf[0m
[38;5;238m1781[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1782[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;166;226;46mcrlf[0m
[38;5;238m1783[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1784[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m1785[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_msg[0m
[38;5;238m1786[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m
[38;5;238m1787[0m   [38;5;238mâ”‚[0m 
[38;5;238m1788[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mprompt[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;230;219;116m'[0m[38;2;230;219;116m>[0m[38;2;230;219;116m'[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m
[38;5;238m1789[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mcrlf[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m10[0m[38;2;248;248;242m,[0m[38;2;190;132;255m13[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m
[38;5;238m1790[0m   [38;5;238mâ”‚[0m 
[38;5;238m1791[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***************************************[0m
[38;5;238m1792[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Type inline message             ***[0m
[38;5;238m1793[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***************************************[0m
[38;5;238m1794[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtypeinmsg[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m load byte from message[0m
[38;5;238m1795[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mreturn[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return if last byte[0m
[38;5;238m1796[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m call type routine[0m
[38;5;238m1797[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_tty[0m
[38;5;238m1798[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtypeinmsg[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop until a zero found[0m
[38;5;238m1799[0m   [38;5;238mâ”‚[0m 
[38;5;238m1800[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *************************************[0m
[38;5;238m1801[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Check if character is numeric ***[0m
[38;5;238m1802[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** D - char to check             ***[0m
[38;5;238m1803[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns DF=1 if numeric       ***[0m
[38;5;238m1804[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***         DF=0 if not           ***[0m
[38;5;238m1805[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *************************************[0m
[38;5;238m1806[0m   [38;5;238mâ”‚[0m [38;2;166;226;46misnum[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save a copy[0m
[38;5;238m1807[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m0[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for below zero[0m
[38;5;238m1808[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mfails[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if below[0m
[38;5;238m1809[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m10[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if above[0m
[38;5;238m1810[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mfails[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m fails if so[0m
[38;5;238m1811[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mpasses[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal success[0m
[38;5;238m1812[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlskp[0m
[38;5;238m1813[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mfails[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal failure[0m
[38;5;238m1814[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover character[0m
[38;5;238m1815[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1816[0m   [38;5;238mâ”‚[0m 
[38;5;238m1817[0m   [38;5;238mâ”‚[0m [38;2;166;226;46merr[0m[38;2;248;248;242m:[0m[38;2;248;248;242m       [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal an error[0m
[38;5;238m1818[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m1819[0m   [38;5;238mâ”‚[0m 
[38;5;238m1820[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0a00h[0m
[38;5;238m1821[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***************************************************************[0m
[38;5;238m1822[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Function to convert hex input characters to binary      ***[0m
[38;5;238m1823[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - Pointer to characters                              ***[0m
[38;5;238m1824[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns - RF - First character that is not alphanumeric ***[0m
[38;5;238m1825[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***           RD - Converted number                         ***[0m
[38;5;238m1826[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***************************************************************[0m
[38;5;238m1827[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mhexin[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set initial total[0m
[38;5;238m1828[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1829[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1830[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtobinlp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get input character[0m
[38;5;238m1831[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m0[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert to binary[0m
[38;5;238m1832[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtobindn[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if termination[0m
[38;5;238m1833[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m1834[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0f0h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for alpha[0m
[38;5;238m1835[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point back[0m
[38;5;238m1836[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46misnumeric[0m
[38;5;238m1837[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover byte[0m
[38;5;238m1838[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m49[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if lowercase[0m
[38;5;238m1839[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhexgo[0m
[38;5;238m1840[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte[0m
[38;5;238m1841[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m32[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert to uppercase[0m
[38;5;238m1842[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mhexgo2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and continue[0m
[38;5;238m1843[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mhexgo[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover byte[0m
[38;5;238m1844[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mhexgo2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m7[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m offset[0m
[38;5;238m1845[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtobingo[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and continue[0m
[38;5;238m1846[0m   [38;5;238mâ”‚[0m [38;2;166;226;46misnumeric[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover byte[0m
[38;5;238m1847[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m10[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for end of numbers[0m
[38;5;238m1848[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtobindn[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if end[0m
[38;5;238m1849[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover byte[0m
[38;5;238m1850[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtobingo[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save number[0m
[38;5;238m1851[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m16[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for valid range[0m
[38;5;238m1852[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtobingd[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if good[0m
[38;5;238m1853[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m remove number from stack[0m
[38;5;238m1854[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtobindn[0m
[38;5;238m1855[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtobingd[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m4[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to multiply by 16[0m
[38;5;238m1856[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtobinglp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mstxd[0m
[38;5;238m1857[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply by 2[0m
[38;5;238m1858[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m
[38;5;238m1859[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1860[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1861[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m
[38;5;238m1862[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1863[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m
[38;5;238m1864[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m
[38;5;238m1865[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msd[0m
[38;5;238m1866[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtobinglp[0m
[38;5;238m1867[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to new number[0m
[38;5;238m1868[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and add to total[0m
[38;5;238m1869[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m
[38;5;238m1870[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1871[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1872[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madci[0m[38;2;248;248;242m    [0m[38;2;190;132;255m0[0m
[38;5;238m1873[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1874[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtobinlp[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back for next character[0m
[38;5;238m1875[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtobindn[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move back to terminating character[0m
[38;5;238m1876[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m1877[0m   [38;5;238mâ”‚[0m 
[38;5;238m1878[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************************[0m
[38;5;238m1879[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Convert a binary number to hex output ***[0m
[38;5;238m1880[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RD - Number to convert                ***[0m
[38;5;238m1881[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - Buffer for output                ***[0m
[38;5;238m1882[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: RF - next buffer position    ***[0m
[38;5;238m1883[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          RD - consumed                ***[0m
[38;5;238m1884[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *********************************************[0m
[38;5;238m1885[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mhexout2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move low byte to high[0m
[38;5;238m1886[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1887[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m2[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m 2 nybbles to display[0m
[38;5;238m1888[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlskp[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m skip over the 4[0m
[38;5;238m1889[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mhexout4[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m4[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m 4 nybbles to display[0m
[38;5;238m1890[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mhexoutlp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save the count[0m
[38;5;238m1891[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m zero the temp var[0m
[38;5;238m1892[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m1893[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m4[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m perform 4 shift[0m
[38;5;238m1894[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mhexoutl2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save count[0m
[38;5;238m1895[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m perform shift[0m
[38;5;238m1896[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m
[38;5;238m1897[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1898[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1899[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m
[38;5;238m1900[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m1901[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m1902[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m
[38;5;238m1903[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m1904[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point back to count[0m
[38;5;238m1905[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to decrement it[0m
[38;5;238m1906[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msd[0m
[38;5;238m1907[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhexoutl2[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if more shifts needed[0m
[38;5;238m1908[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get nybble[0m
[38;5;238m1909[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m10[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compare to 10[0m
[38;5;238m1910[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhexoutal[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if alpha[0m
[38;5;238m1911[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get value[0m
[38;5;238m1912[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m30h[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert to ascii[0m
[38;5;238m1913[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mhexoutl3[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store value into buffer[0m
[38;5;238m1914[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m1915[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to count[0m
[38;5;238m1916[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to subtract 1 from it[0m
[38;5;238m1917[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msd[0m
[38;5;238m1918[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhexoutlp[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop if not done[0m
[38;5;238m1919[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m1920[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mhexoutal[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get value[0m
[38;5;238m1921[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m55[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m convert to ascii[0m
[38;5;238m1922[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mhexoutl3[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and continue[0m
[38;5;238m1923[0m   [38;5;238mâ”‚[0m 
[38;5;238m1924[0m   [38;5;238mâ”‚[0m 
[38;5;238m1925[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump to called routine[0m
[38;5;238m1926[0m   [38;5;238mâ”‚[0m [38;2;249;38;114mcall[0m[38;2;248;248;242m:    [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m Save D[0m
[38;5;238m1927[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save last R[6] to stack[0m
[38;5;238m1928[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m1929[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mstxd[0m
[38;5;238m1930[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m1931[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mstxd[0m
[38;5;238m1932[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m copy R[3] to R[6][0m
[38;5;238m1933[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m1934[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m
[38;5;238m1935[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m1936[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get subroutine address[0m
[38;5;238m1937[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and put into r3[0m
[38;5;238m1938[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m1939[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m
[38;5;238m1940[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover D[0m
[38;5;238m1941[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;249;38;114mcall[0m[38;2;249;38;114m-[0m[38;2;190;132;255m1[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m transfer control to subroutine[0m
[38;5;238m1942[0m   [38;5;238mâ”‚[0m 
[38;5;238m1943[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m transfer control back to coller[0m
[38;5;238m1944[0m   [38;5;238mâ”‚[0m [38;2;249;38;114mret[0m[38;2;248;248;242m:     [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m Save D[0m
[38;5;238m1945[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m[38;2;248;248;242m                    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m copy R[6] to R[3][0m
[38;5;238m1946[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m
[38;5;238m1947[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m1948[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m
[38;5;238m1949[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m1950[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to old R[6][0m
[38;5;238m1951[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mldxa[0m
[38;5;238m1952[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m1953[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mldx[0m
[38;5;238m1954[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m1955[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m1956[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;249;38;114mret[0m[38;2;249;38;114m-[0m[38;2;190;132;255m1[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and perform return to caller[0m
[38;5;238m1957[0m   [38;5;238mâ”‚[0m 
[38;5;238m1958[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ********************************[0m
[38;5;238m1959[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** See if D is alphabetic   ***[0m
[38;5;238m1960[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns DF=0 - not alpha ***[0m
[38;5;238m1961[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***         DF=1 - is alpha  ***[0m
[38;5;238m1962[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ********************************[0m
[38;5;238m1963[0m   [38;5;238mâ”‚[0m [38;2;166;226;46misalpha[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save copy of do[0m
[38;5;238m1964[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116mA[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check uc letters[0m
[38;5;238m1965[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mfails[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if below A[0m
[38;5;238m1966[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m27[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check upper range[0m
[38;5;238m1967[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mpasses[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if valid[0m
[38;5;238m1968[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover character[0m
[38;5;238m1969[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116ma[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check lc letters[0m
[38;5;238m1970[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mfails[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if below A[0m
[38;5;238m1971[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m27[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check upper range[0m
[38;5;238m1972[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mpasses[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if valid[0m
[38;5;238m1973[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mfails[0m
[38;5;238m1974[0m   [38;5;238mâ”‚[0m 
[38;5;238m1975[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **********************************[0m
[38;5;238m1976[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** check D if hex             ***[0m
[38;5;238m1977[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns DF=1 - hex         ***[0m
[38;5;238m1978[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***         DF=0 - non-hex     ***[0m
[38;5;238m1979[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **********************************[0m
[38;5;238m1980[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mishex[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if it is numeric[0m
[38;5;238m1981[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misnum[0m
[38;5;238m1982[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m keep a copy[0m
[38;5;238m1983[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mpasses[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if it is numeric[0m
[38;5;238m1984[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116mA[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for below uppercase a[0m
[38;5;238m1985[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mfails[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m value is not hex[0m
[38;5;238m1986[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m6[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for less then 'G'[0m
[38;5;238m1987[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mpasses[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if so[0m
[38;5;238m1988[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover value[0m
[38;5;238m1989[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116ma[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for lowercase a[0m
[38;5;238m1990[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mfails[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m1991[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m6[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for less than 'g'[0m
[38;5;238m1992[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbnf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mpasses[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if so[0m
[38;5;238m1993[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mfails[0m
[38;5;238m1994[0m   [38;5;238mâ”‚[0m 
[38;5;238m1995[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m
[38;5;238m1996[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m MOVER.ASM - Function Move Programs Into Low memory[0m
[38;5;238m1997[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m For Execution.[0m
[38;5;238m1998[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m
[38;5;238m1999[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Normal Entry PC = 3, RF = Program Header[0m
[38;5;238m2000[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m
[38;5;238m2001[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Exit: Starts Program at specified address[0m
[38;5;238m2002[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m With P=0,X=0,IE=1[0m
[38;5;238m2003[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m
[38;5;238m2004[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m This module written by Richard Peters[0m
[38;5;238m2005[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m*********************************************************[0m
[38;5;238m2006[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m HEADER DEFINITION ANY ADDRESS[0m
[38;5;238m2007[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m OFFSET[0m
[38;5;238m2008[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m  00   = Program RAM Start Address[0m
[38;5;238m2009[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m +02   = Program RAM End Address[0m
[38;5;238m2010[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m +04   = Program Execution Address[0m
[38;5;238m2011[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m +06   = Accual PROGRAM Bytes[0m
[38;5;238m2012[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m*********************************************************[0m
[38;5;238m2013[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0adah[0m
[38;5;238m2014[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmover[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2015[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2016[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2017[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2018[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2019[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2020[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr1[0m
[38;5;238m2021[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2022[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr1[0m
[38;5;238m2023[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr1[0m
[38;5;238m2024[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2025[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m2026[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2027[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m2028[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmoverlp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2029[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2030[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2031[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr1[0m
[38;5;238m2032[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2033[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2034[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msd[0m
[38;5;238m2035[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmoverlp[0m
[38;5;238m2036[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr1[0m
[38;5;238m2037[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2038[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2039[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msd[0m
[38;5;238m2040[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmoverlp[0m
[38;5;238m2041[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m3[0m
[38;5;238m2042[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2043[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mret[0m
[38;5;238m2044[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m2045[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2046[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m2047[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2048[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr0[0m
[38;5;238m2049[0m   [38;5;238mâ”‚[0m 
[38;5;238m2050[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0b00h[0m
[38;5;238m2051[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mresetide[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait til drive ready[0m
[38;5;238m2052[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwaitrdy[0m
[38;5;238m2053[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if timout[0m
[38;5;238m2054[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get selected drive[0m
[38;5;238m2055[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift over 4 bits[0m
[38;5;238m2056[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2057[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2058[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2059[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write drive select to stack[0m
[38;5;238m2060[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m6[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select device register[0m
[38;5;238m2061[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2062[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write select port[0m
[38;5;238m2063[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write device code[0m
[38;5;238m2064[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point back[0m
[38;5;238m2065[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for immediate outs[0m
[38;5;238m2066[0m   [38;5;238mâ”‚[0m 
[38;5;238m2067[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select interrupt port[0m
[38;5;238m2068[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m00eh[0m
[38;5;238m2069[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m function to perform soft reset[0m
[38;5;238m2070[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m4[0m
[38;5;238m2071[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and clear it[0m
[38;5;238m2072[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m0[0m
[38;5;238m2073[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m reset x to stack[0m
[38;5;238m2074[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait til drive ready[0m
[38;5;238m2075[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwaitrdy[0m
[38;5;238m2076[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if timout[0m
[38;5;238m2077[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for immediate outs[0m
[38;5;238m2078[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select feature register[0m
[38;5;238m2079[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m1[0m
[38;5;238m2080[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m enable 8 bit mode[0m
[38;5;238m2081[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m1[0m
[38;5;238m2082[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select command register[0m
[38;5;238m2083[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m7[0m
[38;5;238m2084[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m command to set features[0m
[38;5;238m2085[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m0efh[0m
[38;5;238m2086[0m   [38;5;238mâ”‚[0m 
[38;5;238m2087[0m   [38;5;238mâ”‚[0m 
[38;5;238m2088[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point X back to stack[0m
[38;5;238m2089[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait til drive ready[0m
[38;5;238m2090[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwaitrdy[0m
[38;5;238m2091[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_err[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if timout[0m
[38;5;238m2092[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mide_good[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal no error[0m
[38;5;238m2093[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m2094[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mide_err[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal error occurred[0m
[38;5;238m2095[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m
[38;5;238m2096[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m
[38;5;238m2097[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mwrtide[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed registers[0m
[38;5;238m2098[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2099[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2100[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2101[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m call wait til ready[0m
[38;5;238m2102[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwaitrdy[0m
[38;5;238m2103[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_fail[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump on timeout error[0m
[38;5;238m2104[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m030h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m command for sector write[0m
[38;5;238m2105[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now setup command[0m
[38;5;238m2106[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwrtcmd[0m
[38;5;238m2107[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_fail[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if error occurred[0m
[38;5;238m2108[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m2[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m high byte of 512[0m
[38;5;238m2109[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into count[0m
[38;5;238m2110[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m low byte of 512[0m
[38;5;238m2111[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into low of count[0m
[38;5;238m2112[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need data register[0m
[38;5;238m2113[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place on stack[0m
[38;5;238m2114[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select data register[0m
[38;5;238m2115[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move pointer[0m
[38;5;238m2116[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set data pointer[0m
[38;5;238m2117[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mwrtloop[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to ide controller[0m
[38;5;238m2118[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement byte count[0m
[38;5;238m2119[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for completion[0m
[38;5;238m2120[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mwrtloop[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m2121[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to check high byte[0m
[38;5;238m2122[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mwrtloop[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if more to go[0m
[38;5;238m2123[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point x to stack[0m
[38;5;238m2124[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m call wait til ready[0m
[38;5;238m2125[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwaitrdy[0m
[38;5;238m2126[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_fail[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if error occurred[0m
[38;5;238m2127[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal no error[0m
[38;5;238m2128[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m no errors in D[0m
[38;5;238m2129[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mideret[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2130[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover consumed registers[0m
[38;5;238m2131[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2132[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2133[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m2134[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2135[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2136[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return to caller[0m
[38;5;238m2137[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mide_fail[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for immediate out[0m
[38;5;238m2138[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select error register[0m
[38;5;238m2139[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m1[0m
[38;5;238m2140[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point X back to stack[0m
[38;5;238m2141[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read error register[0m
[38;5;238m2142[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal an error[0m
[38;5;238m2143[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mideret[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m2144[0m   [38;5;238mâ”‚[0m 
[38;5;238m2145[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrdide[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed registers[0m
[38;5;238m2146[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2147[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2148[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2149[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m call wait til ready [0m
[38;5;238m2150[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwaitrdy[0m
[38;5;238m2151[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_fail[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump on timeout error[0m
[38;5;238m2152[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m020h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m command for sector read[0m
[38;5;238m2153[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m now setup command[0m
[38;5;238m2154[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mwrtcmd[0m
[38;5;238m2155[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mide_fail[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if error occurred[0m
[38;5;238m2156[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mide_read[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m2[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m high byte of 512[0m
[38;5;238m2157[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into count[0m
[38;5;238m2158[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m lo byte of 512[0m
[38;5;238m2159[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into low of count[0m
[38;5;238m2160[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place on stack[0m
[38;5;238m2161[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select data register[0m
[38;5;238m2162[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move pointer[0m
[38;5;238m2163[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set data pointer[0m
[38;5;238m2164[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrdloop[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read from ide controller[0m
[38;5;238m2165[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to next position[0m
[38;5;238m2166[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement byte count[0m
[38;5;238m2167[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for completion[0m
[38;5;238m2168[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrdloop[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m2169[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to check high byte[0m
[38;5;238m2170[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrdloop[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if more to go[0m
[38;5;238m2171[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signify read complete[0m
[38;5;238m2172[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2173[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mideret[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m2174[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m          [0m
[38;5;238m2175[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mwaitrdy[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m07h[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need status register[0m
[38;5;238m2176[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store onto stack[0m
[38;5;238m2177[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write ide selection port[0m
[38;5;238m2178[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point x back to free spot[0m
[38;5;238m2179[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]   Note that the whole rdyloop thing takes about 24 machine cycles or 19[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94m2[0m
[38;5;238m2180[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] clocks. The timeout here is 65,536 iterations which, at 2MHz, is about[0m
[38;5;238m2181[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] 6 seconds...[0m
[38;5;238m2182[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup timeout[0m
[38;5;238m2183[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2184[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2185[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrdyloop[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement timeout[0m
[38;5;238m2186[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for end[0m
[38;5;238m2187[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrdy_go[0m
[38;5;238m2188[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2189[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrdy_go[0m
[38;5;238m2190[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mideerror[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup for immediate out[0m
[38;5;238m2191[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m seelct error register[0m
[38;5;238m2192[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m1[0m
[38;5;238m2193[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set X back to stack[0m
[38;5;238m2194[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read error register into D[0m
[38;5;238m2195[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal error occurred[0m
[38;5;238m2196[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m2197[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrdy_go[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read status port[0m
[38;5;238m2198[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift error bit[0m
[38;5;238m2199[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mideerror[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if error occurred[0m
[38;5;238m2200[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift it back[0m
[38;5;238m2201[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0c0h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m mask for BSY and RDY[0m
[38;5;238m2202[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m040h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m want only RDY bit[0m
[38;5;238m2203[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrdyloop[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back until drive is ready[0m
[38;5;238m2204[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get status byte[0m
[38;5;238m2205[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal good[0m
[38;5;238m2206[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m2207[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m RF will point to wrtcmd, which is next needed after first waitrdy[0m
[38;5;238m2208[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mwrtcmd[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write passed command to stack[0m
[38;5;238m2209[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m7[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m command register[0m
[38;5;238m2210[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2211[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get device[0m
[38;5;238m2212[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2213[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m6[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m head/device register[0m
[38;5;238m2214[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2215[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high of lba[0m
[38;5;238m2216[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2217[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m5[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m cylinder high register[0m
[38;5;238m2218[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2219[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get mid of lba[0m
[38;5;238m2220[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2221[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m4[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m cylinder lo register[0m
[38;5;238m2222[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2223[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get lo of lba[0m
[38;5;238m2224[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2225[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m3[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m sector start register[0m
[38;5;238m2226[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2227[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read one sector[0m
[38;5;238m2228[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2229[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m2[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m sector count register register[0m
[38;5;238m2230[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2231[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get device[0m
[38;5;238m2232[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2233[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m6[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m head/device register[0m
[38;5;238m2234[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write to stack[0m
[38;5;238m2235[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m7[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m 7 sets to output[0m
[38;5;238m2236[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mwrtcmd2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_SELECT[0m
[38;5;238m2237[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mout[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m
[38;5;238m2238[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m subtract 1[0m
[38;5;238m2239[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mwrtcmd2[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if not done[0m
[38;5;238m2240[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point back to free register[0m
[38;5;238m2241[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdrqloop[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46minp[0m[38;2;248;248;242m     [0m[38;2;166;226;46mIDE_DATA[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m read status register[0m
[38;5;238m2242[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get error bit[0m
[38;5;238m2243[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mideerror[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if error[0m
[38;5;238m2244[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m restore value[0m
[38;5;238m2245[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check BSY bit[0m
[38;5;238m2246[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mdrqloop[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if set[0m
[38;5;238m2247[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshrc[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m restore value[0m
[38;5;238m2248[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m8[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m mask for DRQ bit[0m
[38;5;238m2249[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdrqloop[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop until found[0m
[38;5;238m2250[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m2251[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m the branch to beforerdy, allows us to use waitrdy again[0m
[38;5;238m2252[0m   [38;5;238mâ”‚[0m 
[38;5;238m2253[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0c00h[0m
[38;5;238m2254[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr3[0m
[38;5;238m2255[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdelay[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get baud constant[0m
[38;5;238m2256[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m remove echo flag[0m
[38;5;238m2257[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put into counter[0m
[38;5;238m2258[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m waste a cycle[0m
[38;5;238m2259[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdelay1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement counter[0m
[38;5;238m2260[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get count[0m
[38;5;238m2261[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdelay[0m[38;2;249;38;114m-[0m[38;2;190;132;255m1[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return if zero[0m
[38;5;238m2262[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdelay1[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m otherwise keep going[0m
[38;5;238m2263[0m   [38;5;238mâ”‚[0m 
[38;5;238m2264[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtimalc[0m[38;2;248;248;242m:[0m
[38;5;238m2265[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]   If the Elf2K 80 column video card and PS/2 keyboard are in use, then[0m
[38;5;238m2266[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] this is completely a no-op.  [0m
[38;5;238m2267[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mVIDEO[0m
[38;5;238m2268[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] see if the VT1802 is active[0m
[38;5;238m2269[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] mask out the local echo bit[0m
[38;5;238m2270[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] BAUD.1 == 0xFE means VT1802[0m
[38;5;238m2271[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtimal1[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] no - continue with autobaud[0m
[38;5;238m2272[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] yes - return right away[0m
[38;5;238m2273[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtimal1[0m[38;2;248;248;242m:[0m
[38;5;238m2274[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2275[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERREQ[0m
[38;5;238m2276[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed registesr[0m
[38;5;238m2277[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2278[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2279[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2280[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2281[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2282[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2283[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2284[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m zero counter 1[0m
[38;5;238m2285[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2286[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2287[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and counter 2[0m
[38;5;238m2288[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2289[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m
[38;5;238m2290[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_timalc[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m use elf2000 specific timalc[0m
[38;5;238m2291[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2292[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtimalc_o[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m    [0m[38;2;255;255;255m$[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait until start bit found[0m
[38;5;238m2293[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mend_sb[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m    [0m[38;2;255;255;255m$[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait until start bit found[0m
[38;5;238m2294[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m    [0m[38;2;255;255;255m$[0m
[38;5;238m2295[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msetbd1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2296[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2297[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2298[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m    [0m[38;2;166;226;46msetbd1[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait until another high[0m
[38;5;238m2299[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msetbd2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2300[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2301[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2302[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m    [0m[38;2;166;226;46msetbd2[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait til the next low[0m
[38;5;238m2303[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msetbd4[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compare values[0m
[38;5;238m2304[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m quantize over small differences[0m
[38;5;238m2305[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m     [0m
[38;5;238m2306[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2307[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2308[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2309[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2310[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m[38;2;248;248;242m      [0m
[38;5;238m2311[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46msetbd3[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if CR was entered[0m
[38;5;238m2312[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m           glo     rb[0m
[38;5;238m2313[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m           plo     rc[0m
[38;5;238m2314[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m
[38;5;238m2315[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlskp[0m[38;2;248;248;242m    [0m
[38;5;238m2316[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msetbd3[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m2317[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2318[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2319[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m4[0m
[38;5;238m2320[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2321[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2322[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m     [0m
[38;5;238m2323[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2324[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m[38;2;248;248;242m    [0m
[38;5;238m2325[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2326[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtimalc_rt[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover consumed registesr[0m
[38;5;238m2327[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2328[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2329[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2330[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2331[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2332[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2333[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m2334[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2335[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m
[38;5;238m2336[0m   [38;5;238mâ”‚[0m 
[38;5;238m2337[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtype[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2338[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mpush[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed registers[0m
[38;5;238m2339[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mpush[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrd[0m
[38;5;238m2340[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2341[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2342[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m9[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m 9 bits to send[0m
[38;5;238m2343[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2344[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mmov[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m,[0m[38;2;166;226;46mdelay[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point RD to delay routine[0m
[38;5;238m2345[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m2346[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2347[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msendlp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46msendnb[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if no bit[0m
[38;5;238m2348[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERSEQ[0m[38;2;248;248;242m                      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set output[0m
[38;5;238m2349[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46msendct[0m
[38;5;238m2350[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msendnb[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mSERREQ[0m[38;2;248;248;242m                      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m reset output[0m
[38;5;238m2351[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46msendct[0m
[38;5;238m2352[0m   [38;5;238mâ”‚[0m [38;2;166;226;46msendct[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m perform bit delay[0m
[38;5;238m2353[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m [0m[38;2;166;226;46mr2[0m
[38;5;238m2354[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m [0m[38;2;166;226;46mr2[0m
[38;5;238m2355[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2356[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshrc[0m
[38;5;238m2357[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2358[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2359[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2360[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46msendlp[0m
[38;5;238m2361[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERREQ[0m[38;2;248;248;242m                      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set stop bits[0m
[38;5;238m2362[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2363[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2364[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mpop[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover consumed registers[0m
[38;5;238m2365[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mpop[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2366[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m
[38;5;238m2367[0m   [38;5;238mâ”‚[0m 
[38;5;238m2368[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mSERHDX[0m
[38;5;238m2369[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]   If the console bit banged serial is half duplex (as is, for example,[0m
[38;5;238m2370[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] the DS275 used in the ELF2K) then we can't echo input on a bit for bit[0m
[38;5;238m2371[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] basis.  Istead, we have to read the entire character, wait for the sto[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mp[0m
[38;5;238m2372[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] bit, and then transmit the whole character back to the terminal.  This[0m
[38;5;238m2373[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] version of read: does precisely that ...[0m
[38;5;238m2374[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mread[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2375[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2376[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2377[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2378[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2379[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2380[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2381[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2382[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m9[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m receive 9 bits (counting the START bi[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mt)[0m
[38;5;238m2383[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2384[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;166;226;46mdelay[0m
[38;5;238m2385[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2386[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;166;226;46mdelay[0m
[38;5;238m2387[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2388[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m first delay is half bit size[0m
[38;5;238m2389[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2390[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2391[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m01[0m
[38;5;238m2392[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2393[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m    [0m[38;2;255;255;255m$[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait for transmission[0m
[38;5;238m2394[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait half the pulse width[0m
[38;5;238m2395[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover baud constant[0m
[38;5;238m2396[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2397[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvlp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2398[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift right[0m
[38;5;238m2399[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrecvlp0[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if zero bi[0m
[38;5;238m2400[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mori[0m[38;2;248;248;242m     [0m[38;2;190;132;255m128[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set bit[0m
[38;5;238m2401[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvlp1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2402[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m perform bit delay[0m
[38;5;238m2403[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement bit count[0m
[38;5;238m2404[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mnop[0m
[38;5;238m2405[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mnop[0m
[38;5;238m2406[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for zero[0m
[38;5;238m2407[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrecvlp[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop if not[0m
[38;5;238m2408[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvdone[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mSERREQ[0m
[38;5;238m2409[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get past stop bit[0m
[38;5;238m2410[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2411[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get character[0m
[38;5;238m2412[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2413[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m
[38;5;238m2414[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2415[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2416[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2417[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2418[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2419[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2420[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m2421[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2422[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m;[RLA]    glo     re[0m
[38;5;238m2423[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m;[RLA]    shr[0m
[38;5;238m2424[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m;[RLA]    plo     re                  ; save char[0m
[38;5;238m2425[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get echo flag[0m
[38;5;238m2426[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if need echo[0m
[38;5;238m2427[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get character[0m
[38;5;238m2428[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mnoecho[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if no echo needed[0m
[38;5;238m2429[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save on stack[0m
[38;5;238m2430[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m type the character out[0m
[38;5;238m2431[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_type[0m
[38;5;238m2432[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover character[0m
[38;5;238m2433[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m2434[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnoecho[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return to caller[0m
[38;5;238m2435[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvlp0[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrecvlp1[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m equalize between 0 and 1[0m
[38;5;238m2436[0m   [38;5;238mâ”‚[0m 
[38;5;238m2437[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m2438[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA]   This version of read: is full duplex - it echos each bit as that[0m
[38;5;238m2439[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] bit is received...[0m
[38;5;238m2440[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mread[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;249;38;114mpush[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save consumed registers[0m
[38;5;238m2441[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mpush[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrd[0m
[38;5;238m2442[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m9[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m 8 bits to receive[0m
[38;5;238m2443[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2444[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mmov[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m,[0m[38;2;166;226;46mdelay[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m address of bit delay routine[0m
[38;5;238m2445[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m first delay is half bit size[0m
[38;5;238m2446[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2447[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2448[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2449[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2450[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m    [0m[38;2;255;255;255m$[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait for transmission[0m
[38;5;238m2451[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m wait half the pulse width[0m
[38;5;238m2452[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover baud constant[0m
[38;5;238m2453[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2454[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2455[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m
[38;5;238m2456[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrecvlpe[0m
[38;5;238m2457[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvlp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2458[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift right[0m
[38;5;238m2459[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrecvlp0[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if zero bi[0m
[38;5;238m2460[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mori[0m[38;2;248;248;242m     [0m[38;2;190;132;255m128[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set bit[0m
[38;5;238m2461[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvlp1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2462[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m perform bit delay[0m
[38;5;238m2463[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement bit count[0m
[38;5;238m2464[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mnop[0m
[38;5;238m2465[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mnop[0m
[38;5;238m2466[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for zero[0m
[38;5;238m2467[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrecvlp[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop if not[0m
[38;5;238m2468[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvdone[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mSERREQ[0m
[38;5;238m2469[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get character[0m
[38;5;238m2470[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2471[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mpop[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover consumed registers[0m
[38;5;238m2472[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mpop[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2473[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2474[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return to caller[0m
[38;5;238m2475[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvlp0[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrecvlp1[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m equalize between 0 and 1[0m
[38;5;238m2476[0m   [38;5;238mâ”‚[0m 
[38;5;238m2477[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvlpe[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2478[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift right[0m
[38;5;238m2479[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrecvlpe0[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if zero bi[0m
[38;5;238m2480[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mori[0m[38;2;248;248;242m     [0m[38;2;190;132;255m128[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set bit[0m
[38;5;238m2481[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERREQ[0m
[38;5;238m2482[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvlpe1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2483[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m perform bit delay[0m
[38;5;238m2484[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement bit count[0m
[38;5;238m2485[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2486[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2487[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for zero[0m
[38;5;238m2488[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrecvlpe[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop if not[0m
[38;5;238m2489[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrecvdone[0m
[38;5;238m2490[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mrecvlpe0[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mSERSEQ[0m
[38;5;238m2491[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mrecvlpe1[0m
[38;5;238m2492[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2493[0m   [38;5;238mâ”‚[0m 
[38;5;238m2494[0m   [38;5;238mâ”‚[0m 
[38;5;238m2495[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mbrktest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m clear DF flag[0m
[38;5;238m2496[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERP[0m[38;2;248;248;242m    [0m[38;2;166;226;46mnobreak[0m
[38;5;238m2497[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mSERN[0m[38;2;248;248;242m    [0m[38;2;255;255;255m$[0m
[38;5;238m2498[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal break condition on serial[0m
[38;5;238m2499[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnobreak[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m2500[0m   [38;5;238mâ”‚[0m 
[38;5;238m2501[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************************[0m
[38;5;238m2502[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Serial output with 0C translation to <ESC>[2J ***[0m
[38;5;238m2503[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************************[0m
[38;5;238m2504[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtty[0m[38;2;248;248;242m:[0m[38;2;248;248;242m       [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save character[0m
[38;5;238m2505[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0ch[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m compare against formfeed[0m
[38;5;238m2506[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mttyff[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if formfeed[0m
[38;5;238m2507[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover byte[0m
[38;5;238m2508[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mttyend[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mf_tty[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and display character[0m
[38;5;238m2509[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mttyff[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m display vt100 sequence to clear scree[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mn[0m
[38;5;238m2510[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtypeinmsg[0m
[38;5;238m2511[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m01bh[0m[38;2;248;248;242m,[0m[38;2;230;219;116m'[0m[38;2;230;219;116m[2J[0m[38;2;230;219;116m'[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m
[38;5;238m2512[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return to caller[0m
[38;5;238m2513[0m   [38;5;238mâ”‚[0m 
[38;5;238m2514[0m   [38;5;238mâ”‚[0m 
[38;5;238m2515[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0d00h[0m
[38;5;238m2516[0m   [38;5;238mâ”‚[0m [38;2;166;226;46minitcall[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;249;38;114mret[0m
[38;5;238m2517[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2518[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2519[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr5[0m
[38;5;238m2520[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;249;38;114mret[0m
[38;5;238m2521[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr5[0m
[38;5;238m2522[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;249;38;114mcall[0m
[38;5;238m2523[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr4[0m
[38;5;238m2524[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;249;38;114mcall[0m
[38;5;238m2525[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr4[0m
[38;5;238m2526[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr5[0m
[38;5;238m2527[0m   [38;5;238mâ”‚[0m 
[38;5;238m2528[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** Strcmp compares the strings pointing to by R(D) and R(F)[0m
[38;5;238m2529[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** Returns:[0m
[38;5;238m2530[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****    R(F) = R(D)     0[0m
[38;5;238m2531[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****    R(F) < R(D)     -1 (255)[0m
[38;5;238m2532[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****    R(F) > R(D)     1[0m
[38;5;238m2533[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mstrcmp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next byte in string[0m
[38;5;238m2534[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0ffh[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for zero[0m
[38;5;238m2535[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mstrcmpe[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m found end of first string[0m
[38;5;238m2536[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into memory[0m
[38;5;238m2537[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mirx[0m
[38;5;238m2538[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from first string[0m
[38;5;238m2539[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46msm[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m subtract 2nd byte from it[0m
[38;5;238m2540[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mstrcmp[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m so far a match, keep looking[0m
[38;5;238m2541[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbnf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mstrcmp1[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if first string is smaller[0m
[38;5;238m2542[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m indicate first string is larger[0m
[38;5;238m2543[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlskp[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return to caller[0m
[38;5;238m2544[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mstrcmp1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m255[0m[38;2;248;248;242m         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return -1, first string is smaller[0m
[38;5;238m2545[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to calelr[0m
[38;5;238m2546[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mstrcmpe[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from second string[0m
[38;5;238m2547[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mstrcmpm[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if also zero[0m
[38;5;238m2548[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m first string is smaller (returns -1)[0m
[38;5;238m2549[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m2550[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mstrcmpm[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m strings are a match[0m
[38;5;238m2551[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m2552[0m   [38;5;238mâ”‚[0m 
[38;5;238m2553[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** ltrim trims leading white space from string pointed to by R[F][0m
[38;5;238m2554[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** Returns:[0m
[38;5;238m2555[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ****    R(F) pointing to non-whitespace portion of string[0m
[38;5;238m2556[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mltrim[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next byte from string[0m
[38;5;238m2557[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mreturn[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return if at end of string[0m
[38;5;238m2558[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116m [0m[38;2;230;219;116m'[0m[38;2;249;38;114m+[0m[38;2;190;132;255m1[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m looking for anthing <= space[0m
[38;5;238m2559[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mreturn[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m found first non white-space[0m
[38;5;238m2560[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to next character[0m
[38;5;238m2561[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mltrim[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m keep looking[0m
[38;5;238m2562[0m   [38;5;238mâ”‚[0m 
[38;5;238m2563[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** strcpy copies string pointed to by R[F] to R[D][0m
[38;5;238m2564[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mstrcpy[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from source string[0m
[38;5;238m2565[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into destination[0m
[38;5;238m2566[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mreturn[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return if copied terminator[0m
[38;5;238m2567[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;249;38;114minc[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m increment destination pointer[0m
[38;5;238m2568[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mstrcpy[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m continue looping[0m
[38;5;238m2569[0m   [38;5;238mâ”‚[0m 
[38;5;238m2570[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** memcpy copies R[C] bytes from R[F] to R[D][0m
[38;5;238m2571[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmemcpy[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get low count byte[0m
[38;5;238m2572[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mmemcpy1[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not zero[0m
[38;5;238m2573[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high count byte[0m
[38;5;238m2574[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m    [0m[38;2;166;226;46mreturn[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return if zero[0m
[38;5;238m2575[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmemcpy1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from source[0m
[38;5;238m2576[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into destination[0m
[38;5;238m2577[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;249;38;114minc[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to next destination position[0m
[38;5;238m2578[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m    [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m           [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement count[0m
[38;5;238m2579[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmemcpy[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and continue copy[0m
[38;5;238m2580[0m   [38;5;238mâ”‚[0m 
[38;5;238m2581[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RC:RB = RF * RD (RB is low word)[0m
[38;5;238m2582[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** R(X) must point to suitable stack[0m
[38;5;238m2583[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmul16[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m zero out total[0m
[38;5;238m2584[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2585[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2586[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2587[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2588[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m make sure X points to stack[0m
[38;5;238m2589[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmulloop[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get low of multiplier[0m
[38;5;238m2590[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmulcont[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m continue multiplying if nonzero[0m
[38;5;238m2591[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check hi byte as well[0m
[38;5;238m2592[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmulcont[0m
[38;5;238m2593[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m2594[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmulcont[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift multiplier[0m
[38;5;238m2595[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m     [0m
[38;5;238m2596[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2597[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2598[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshrc[0m[38;2;248;248;242m    [0m
[38;5;238m2599[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2600[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmulcont2[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop if no addition needed[0m
[38;5;238m2601[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m add F to C:B[0m
[38;5;238m2602[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2603[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2604[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m[38;2;248;248;242m     [0m
[38;5;238m2605[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2606[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2607[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2608[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2609[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madc[0m
[38;5;238m2610[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2611[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m carry into high word[0m
[38;5;238m2612[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madci[0m[38;2;248;248;242m    [0m[38;2;190;132;255m0[0m
[38;5;238m2613[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2614[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2615[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madci[0m[38;2;248;248;242m    [0m[38;2;190;132;255m0[0m
[38;5;238m2616[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2617[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mmulcont2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m shift first number[0m
[38;5;238m2618[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m
[38;5;238m2619[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2620[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2621[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m
[38;5;238m2622[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2623[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mmulloop[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop until done[0m
[38;5;238m2624[0m   [38;5;238mâ”‚[0m 
[38;5;238m2625[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RB = RF/RD[0m
[38;5;238m2626[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF = Remainder[0m
[38;5;238m2627[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** uses R8 and R9[0m
[38;5;238m2628[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdiv16[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m clear answer[0m
[38;5;238m2629[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2630[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2631[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m set additive[0m
[38;5;238m2632[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m2633[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m2634[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for divide by 0[0m
[38;5;238m2635[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46md16lp1[0m
[38;5;238m2636[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2637[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46md16lp1[0m
[38;5;238m2638[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0ffh[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return 0ffffh as div/0 error[0m
[38;5;238m2639[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2640[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2641[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m     [0m
[38;5;238m2642[0m   [38;5;238mâ”‚[0m [38;2;166;226;46md16lp1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high byte from r7[0m
[38;5;238m2643[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m128[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check high bit[0m
[38;5;238m2644[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mdivst[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if set[0m
[38;5;238m2645[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m lo byte of divisor[0m
[38;5;238m2646[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply by 2[0m
[38;5;238m2647[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and put back[0m
[38;5;238m2648[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get high byte of divisor[0m
[38;5;238m2649[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m continue multiply by 2[0m
[38;5;238m2650[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and put back[0m
[38;5;238m2651[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m multiply additive by 2[0m
[38;5;238m2652[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshl[0m
[38;5;238m2653[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m2654[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m2655[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshlc[0m
[38;5;238m2656[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m2657[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46md16lp1[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop until high bit set in divisor[0m
[38;5;238m2658[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdivst[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get low of divisor[0m
[38;5;238m2659[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mdivgo[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if still nonzero[0m
[38;5;238m2660[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check hi byte too[0m
[38;5;238m2661[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mreturn[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if done[0m
[38;5;238m2662[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdivgo[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m copy dividend[0m
[38;5;238m2663[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m2664[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2665[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m2666[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get lo of divisor[0m
[38;5;238m2667[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into memory[0m
[38;5;238m2668[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to memory[0m
[38;5;238m2669[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get low byte of dividend[0m
[38;5;238m2670[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m[38;2;248;248;242m                          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m subtract[0m
[38;5;238m2671[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put back into r6[0m
[38;5;238m2672[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get hi of divisor[0m
[38;5;238m2673[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into memory[0m
[38;5;238m2674[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to byte[0m
[38;5;238m2675[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get hi of dividend[0m
[38;5;238m2676[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msmb[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m subtract[0m
[38;5;238m2677[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and put back[0m
[38;5;238m2678[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46mdivyes[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m branch if no borrow happened[0m
[38;5;238m2679[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover copy[0m
[38;5;238m2680[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put back into dividend[0m
[38;5;238m2681[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr9[0m
[38;5;238m2682[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2683[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdivno[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump to next iteration[0m
[38;5;238m2684[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdivyes[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get lo of additive[0m
[38;5;238m2685[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place in memory[0m
[38;5;238m2686[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to byte[0m
[38;5;238m2687[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get lo of answer[0m
[38;5;238m2688[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madd[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and add[0m
[38;5;238m2689[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put back[0m
[38;5;238m2690[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get hi of additive[0m
[38;5;238m2691[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into memory[0m
[38;5;238m2692[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to byte[0m
[38;5;238m2693[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get hi byte of answer[0m
[38;5;238m2694[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114madc[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and continue addition[0m
[38;5;238m2695[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put back[0m
[38;5;238m2696[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mdivno[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get hi of divisor[0m
[38;5;238m2697[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m divide by 2[0m
[38;5;238m2698[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put back[0m
[38;5;238m2699[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get lo of divisor[0m
[38;5;238m2700[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshrc[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m continue divide by 2[0m
[38;5;238m2701[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2702[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get hi of divisor[0m
[38;5;238m2703[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m divide by 2[0m
[38;5;238m2704[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m put back[0m
[38;5;238m2705[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get lo of divisor[0m
[38;5;238m2706[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mshrc[0m[38;2;248;248;242m                        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m continue divide by 2[0m
[38;5;238m2707[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m2708[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mdivst[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m next iteration[0m
[38;5;238m2709[0m   [38;5;238mâ”‚[0m 
[38;5;238m2710[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mttyold[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtty[0m
[38;5;238m2711[0m   [38;5;238mâ”‚[0m 
[38;5;238m2712[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************[0m
[38;5;238m2713[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** See if D is alphanumeric          ***[0m
[38;5;238m2714[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=0 - not valid         ***[0m
[38;5;238m2715[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=1 - is valid          ***[0m
[38;5;238m2716[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************[0m
[38;5;238m2717[0m   [38;5;238mâ”‚[0m [38;2;166;226;46misalnum[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m keep copy of D[0m
[38;5;238m2718[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check if numeric[0m
[38;5;238m2719[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misnum[0m
[38;5;238m2720[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mpasses[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if numeric[0m
[38;5;238m2721[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for alpha[0m
[38;5;238m2722[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misalpha[0m
[38;5;238m2723[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mpasses[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if alpha[0m
[38;5;238m2724[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mfails[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m otherwise fails[0m
[38;5;238m2725[0m   [38;5;238mâ”‚[0m 
[38;5;238m2726[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***********************************[0m
[38;5;238m2727[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Check for symbol terminator ***[0m
[38;5;238m2728[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: DF=1 - terminator  ***[0m
[38;5;238m2729[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***********************************[0m
[38;5;238m2730[0m   [38;5;238mâ”‚[0m [38;2;166;226;46misterm[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if alphanumeric[0m
[38;5;238m2731[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misalnum[0m
[38;5;238m2732[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46mfails[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m fails if so[0m
[38;5;238m2733[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mpasses[0m
[38;5;238m2734[0m   [38;5;238mâ”‚[0m 
[38;5;238m2735[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m;[RLA]   The BIOS assembles OK even if this next part isn't aligned, and we[0m
[38;5;238m2736[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m;[RLA] we desperately need those extra couple of bytes at $FF00![0m
[38;5;238m2737[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifndef[0m[38;2;248;248;242m [0m[38;2;166;226;46mELF2K[0m
[38;5;238m2738[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0e00h[0m
[38;5;238m2739[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2740[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ******************************************[0m
[38;5;238m2741[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Check if symbol is in symbol table ***[0m
[38;5;238m2742[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - pointer to ascii symbol       ***[0m
[38;5;238m2743[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** R7 - pointer to token table        ***[0m
[38;5;238m2744[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: RD - function number      ***[0m
[38;5;238m2745[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=1 - is function        ***[0m
[38;5;238m2746[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=0 - is not a function  ***[0m
[38;5;238m2747[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ******************************************[0m
[38;5;238m2748[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtokenfunc[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save position of R7[0m
[38;5;238m2749[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2750[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m2751[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2752[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save other consumed register[0m
[38;5;238m2753[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2754[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2755[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2756[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup function number[0m
[38;5;238m2757[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2758[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save buffer position[0m
[38;5;238m2759[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2760[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2761[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2762[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtfloop[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if at last token[0m
[38;5;238m2763[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtfgo[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m2764[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal symbol not found[0m
[38;5;238m2765[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtfreturn[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover consumed registers[0m
[38;5;238m2766[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2767[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2768[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2769[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2770[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2771[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m2772[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m2773[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m2774[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m2775[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtfgo[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get token byte[0m
[38;5;238m2776[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m080h[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if last one[0m
[38;5;238m2777[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtflast[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if it was[0m
[38;5;238m2778[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from function table[0m
[38;5;238m2779[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup compare[0m
[38;5;238m2780[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from input[0m
[38;5;238m2781[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m[38;2;248;248;242m                          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and compare[0m
[38;5;238m2782[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtfgo[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if match[0m
[38;5;238m2783[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtfnolp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need to find end of token[0m
[38;5;238m2784[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m080h[0m
[38;5;238m2785[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtfnolp[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop until found[0m
[38;5;238m2786[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtfno[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m increment function number[0m
[38;5;238m2787[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m restore buffer position[0m
[38;5;238m2788[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2789[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrb[0m
[38;5;238m2790[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2791[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtfloop[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop to check next token[0m
[38;5;238m2792[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtflast[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from token[0m
[38;5;238m2793[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m07fh[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m strip high bit[0m
[38;5;238m2794[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store for compare[0m
[38;5;238m2795[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte from buffer[0m
[38;5;238m2796[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m[38;2;248;248;242m                          [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and see if a match[0m
[38;5;238m2797[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtfno[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not[0m
[38;5;238m2798[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal match found[0m
[38;5;238m2799[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtfreturn[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m2800[0m   [38;5;238mâ”‚[0m 
[38;5;238m2801[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***********************************************[0m
[38;5;238m2802[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** identify symbol as decimal, hex, or non ***[0m
[38;5;238m2803[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** RF - pointer to symbol                  ***[0m
[38;5;238m2804[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: D=0 - decimal number           ***[0m
[38;5;238m2805[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          D=1 - hex number               ***[0m
[38;5;238m2806[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=1 - non numeric             ***[0m
[38;5;238m2807[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          DF=0 - is numeric              ***[0m
[38;5;238m2808[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***********************************************[0m
[38;5;238m2809[0m   [38;5;238mâ”‚[0m [38;2;166;226;46midnum[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save position[0m
[38;5;238m2810[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2811[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2812[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m2813[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get first byte[0m
[38;5;238m2814[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m must be numeric[0m
[38;5;238m2815[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misnum[0m
[38;5;238m2816[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46midlp1[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if it was[0m
[38;5;238m2817[0m   [38;5;238mâ”‚[0m [38;2;166;226;46midnumno[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal non-numeric[0m
[38;5;238m2818[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlskp[0m
[38;5;238m2819[0m   [38;5;238mâ”‚[0m [38;2;166;226;46midnumyes[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal numeric[0m
[38;5;238m2820[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save number[0m
[38;5;238m2821[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover RF[0m
[38;5;238m2822[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m2823[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2824[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m2825[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2826[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover number[0m
[38;5;238m2827[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mreturn[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return to caller[0m
[38;5;238m2828[0m   [38;5;238mâ”‚[0m [38;2;166;226;46midlp1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next byte[0m
[38;5;238m2829[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for symbol terminator[0m
[38;5;238m2830[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misterm[0m
[38;5;238m2831[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46middec[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal decimal number[0m
[38;5;238m2832[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if char is numeric[0m
[38;5;238m2833[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misnum[0m
[38;5;238m2834[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46midlp1[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if so[0m
[38;5;238m2835[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m move back to char[0m
[38;5;238m2836[0m   [38;5;238mâ”‚[0m [38;2;166;226;46midlp2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get next byte[0m
[38;5;238m2837[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m see if terminator[0m
[38;5;238m2838[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46misterm[0m
[38;5;238m2839[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46midnumno[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if term found before h[0m
[38;5;238m2840[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for hex character[0m
[38;5;238m2841[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mishex[0m
[38;5;238m2842[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbdf[0m[38;2;248;248;242m     [0m[38;2;166;226;46midlp2[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop back if so[0m
[38;5;238m2843[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;230;219;116m'[0m[38;2;230;219;116mH[0m[38;2;230;219;116m'[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for final H[0m
[38;5;238m2844[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46midhex[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if hex[0m
[38;5;238m2845[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m32[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for h[0m
[38;5;238m2846[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46midhex[0m
[38;5;238m2847[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46midnumno[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m was not proper number[0m
[38;5;238m2848[0m   [38;5;238mâ”‚[0m [38;2;166;226;46middec[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal decimal number[0m
[38;5;238m2849[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46midnumyes[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m2850[0m   [38;5;238mâ”‚[0m [38;2;166;226;46midhex[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal hex number[0m
[38;5;238m2851[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46midnumyes[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return[0m
[38;5;238m2852[0m   [38;5;238mâ”‚[0m 
[38;5;238m2853[0m   [38;5;238mâ”‚[0m 
[38;5;238m2854[0m   [38;5;238mâ”‚[0m 
[38;5;238m2855[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** Find last available memory address[0m
[38;5;238m2856[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m **** Returns: RF - last writable address[0m
[38;5;238m2857[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mMCHIP[0m
[38;5;238m2858[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mfreemem[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m080h[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m start from beginning of memory[0m
[38;5;238m2859[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m2860[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mfreemem[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m000h[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m start from beginning of memory[0m
[38;5;238m2861[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2862[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into register[0m
[38;5;238m2863[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0ffh[0m
[38;5;238m2864[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2865[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m be sure x points to stack[0m
[38;5;238m2866[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mfmemlp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get byte[0m
[38;5;238m2867[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save a copy[0m
[38;5;238m2868[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m255[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m flip the bits[0m
[38;5;238m2869[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into memory[0m
[38;5;238m2870[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldn[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m retrieve from memory[0m
[38;5;238m2871[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m place into memory[0m
[38;5;238m2872[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to previous value[0m
[38;5;238m2873[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m2874[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msm[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and compare[0m
[38;5;238m2875[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46mfmemdn[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not different[0m
[38;5;238m2876[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover byte[0m
[38;5;238m2877[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m write back into memory[0m
[38;5;238m2878[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2879[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46madi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m
[38;5;238m2880[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2881[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m;[RLA]    bnz     fmemlp    ; jump if not[0m
[38;5;238m2882[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mSTGROM[0m
[38;5;238m2883[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]   For the Elf 2000, we never want to use page 07FxxH - that belongs to[0m
[38;5;238m2884[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] the Elf 2000 monitor program.  Likewise, if the 80 column video card[0m
[38;5;238m2885[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] is installed then we need to reserve another 2K off the top of SRAM[0m
[38;5;238m2886[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] for the frame buffer.  Sadly, theres no easy way for the BIOS to know[0m
[38;5;238m2887[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] if the video card is installed, but we can make a pretty good guess[0m
[38;5;238m2888[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] by checking RE.1 (the baud rate constant) - if this is zero, then the[0m
[38;5;238m2889[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] video card is being used as the console![0m
[38;5;238m2890[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mVIDEO[0m
[38;5;238m2891[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] get the baud rate constant[0m
[38;5;238m2892[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mani[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] mask out local echo bit[0m
[38;5;238m2893[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mxri[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0feh[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] is the 80 column video card in use?[0m
[38;5;238m2894[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mfmeml1[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] branch if no video card[0m
[38;5;238m2895[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] get the current page[0m
[38;5;238m2896[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m077h[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and stop at page 77H[0m
[38;5;238m2897[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mfmeml2[0m[38;2;248;248;242m    [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] ...[0m
[38;5;238m2898[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2899[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] No video card - test memory up to 07EFFH ...[0m
[38;5;238m2900[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mfmeml1[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] get the current page[0m
[38;5;238m2901[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m07fh[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] and stop at page 7FH[0m
[38;5;238m2902[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mfmeml2[0m[38;2;248;248;242m:[0m
[38;5;238m2903[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m2904[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2905[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2906[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mfmemlp[0m
[38;5;238m2907[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mfmemdn[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point back to last writable memory[0m
[38;5;238m2908[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m
[38;5;238m2909[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2910[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m      [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and return to caller[0m
[38;5;238m2911[0m   [38;5;238mâ”‚[0m 
[38;5;238m2912[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]   This is a "cold" boot - it will set up SCRT and a temporary stack[0m
[38;5;238m2913[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] before calling the "warm" boot at bootret: ...[0m
[38;5;238m2914[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mbootide[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhigh[0m[38;2;248;248;242m [0m[38;2;166;226;46mbootret[0m[38;2;248;248;242m        [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare for seetin call[0m
[38;5;238m2915[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m2916[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlow[0m[38;2;248;248;242m [0m[38;2;166;226;46mbootret[0m
[38;5;238m2917[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr6[0m
[38;5;238m2918[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m setup temp stack[0m
[38;5;238m2919[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2920[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0f0h[0m
[38;5;238m2921[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2922[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msex[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr2[0m
[38;5;238m2923[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mf_initcall[0m
[38;5;238m2924[0m   [38;5;238mâ”‚[0m 
[38;5;238m2925[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA]   This routine will attempt to boot ElfOS from the primary (i.e. master[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94m)[0m
[38;5;238m2926[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] IDE drive.  It returns with DF=1 if there's a hardware error (e.g. no[0m
[38;5;238m2927[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] drive, read error, etc) and with DF=0 if the hardware is OK but the dri[0m
[38;5;238m    [0m   [38;5;238mâ”‚[0m [38;2;117;113;94mve[0m
[38;5;238m2928[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] does not contain a bootable ElfOS system.  Of course, if it works then[0m
[38;5;238m2929[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m[RLA] this routine never returns ...[0m
[38;5;238m2930[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mbootret[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m select master drive[0m
[38;5;238m2931[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrd[0m
[38;5;238m2932[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m reset ide drive[0m
[38;5;238m2933[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_iderst[0m
[38;5;238m2934[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mEIDE[0m
[38;5;238m2935[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46merr[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m [RLA] quit now if error![0m
[38;5;238m2936[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2937[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m prepare to read sector 0[0m
[38;5;238m2938[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m2939[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mr7[0m
[38;5;238m2940[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m2941[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2942[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0e0h[0m
[38;5;238m2943[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;190;132;255mr8[0m
[38;5;238m2944[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m
[38;5;238m2945[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m
[38;5;238m2946[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m2947[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_ideread[0m
[38;5;238m2948[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mEIDE[0m
[38;5;238m2949[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46merr[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to monitor if disk error[0m
[38;5;238m2950[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check boot code[0m
[38;5;238m2951[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mbtcheck[0m
[38;5;238m2952[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbdf[0m[38;2;248;248;242m    [0m[38;2;166;226;46merr[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m error out on mismatch[0m
[38;5;238m2953[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2954[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0106h[0m
[38;5;238m2955[0m   [38;5;238mâ”‚[0m 
[38;5;238m2956[0m   [38;5;238mâ”‚[0m [38;2;166;226;46minput256[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m1[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m allow 256 input bytes[0m
[38;5;238m2957[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2958[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m2959[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m
[38;5;238m2960[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46minput[0m
[38;5;238m2961[0m   [38;5;238mâ”‚[0m 
[38;5;238m2962[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***************************************[0m
[38;5;238m2963[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Type message pointed to by R[F] ***[0m
[38;5;238m2964[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***************************************[0m
[38;5;238m2965[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mtypemsg[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlda[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m load byte from message[0m
[38;5;238m2966[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mlbz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mreturn[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return if last byte[0m
[38;5;238m2967[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m call type routine[0m
[38;5;238m2968[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_tty[0m
[38;5;238m2969[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mtypemsg[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m loop until a zero found[0m
[38;5;238m2970[0m   [38;5;238mâ”‚[0m 
[38;5;238m2971[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *******************************************************[0m
[38;5;238m2972[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Get supported devices list                      ***[0m
[38;5;238m2973[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Returns: RF - device list                       ***[0m
[38;5;238m2974[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 0 - IDE                            ***[0m
[38;5;238m2975[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 1 - Floppy                         ***[0m
[38;5;238m2976[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 2 - Bit-banged serial              ***[0m
[38;5;238m2977[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 3 - UART                           ***[0m
[38;5;238m2978[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 4 - RTC                            ***[0m
[38;5;238m2979[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 5 - NVR                            ***[0m
[38;5;238m2980[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 6 - 1861 video ?                   ***[0m
[38;5;238m2981[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 7 - 9118 video ?                   ***[0m
[38;5;238m2982[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 8 - extended BIOS vectors at $F800 ***[0m
[38;5;238m2983[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***          Bit 9 - extended BIOS vectors at $F000 ***[0m
[38;5;238m2984[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *******************************************************[0m
[38;5;238m2985[0m   [38;5;238mâ”‚[0m 
[38;5;238m2986[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m Device bits returned in RF.0[0m
[38;5;238m2987[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mDEVICES[0m[38;2;248;248;242m:[0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;190;132;255m05h[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m all versions support IDE and bit banged serial[0m
[38;5;238m2988[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m
[38;5;238m2989[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mUARTDEV[0m[38;2;248;248;242m:[0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;190;132;255m08h[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m UART is supported too[0m
[38;5;238m2990[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m2991[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mUARTDEV[0m[38;2;248;248;242m:[0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m no UART[0m
[38;5;238m2992[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2993[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mNVR[0m
[38;5;238m2994[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mNVRDEV[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;190;132;255m30h[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m RTC and NVR supported[0m
[38;5;238m2995[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m2996[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mNVRDEV[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239mequ[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m       [0m[38;2;117;113;94m;[0m[38;2;117;113;94m no RTC nor NVR[0m
[38;5;238m2997[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m2998[0m   [38;5;238mâ”‚[0m 
[38;5;238m2999[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m BIOS options bits returned in RF.1[0m
[38;5;238m3000[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mBIOSOPTS[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;102;217;239mequ[0m[38;2;248;248;242m  [0m[38;2;190;132;255m01h[0m[38;2;248;248;242m     [0m[38;2;117;113;94m;[0m[38;2;117;113;94m extended vectors at $F800[0m
[38;5;238m3001[0m   [38;5;238mâ”‚[0m 
[38;5;238m3002[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mgetdev[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mDEVICES[0m[38;2;249;38;114m+[0m[38;2;166;226;46mUARTDEV[0m[38;2;249;38;114m+[0m[38;2;166;226;46mNVRDEV[0m[38;2;248;248;242m  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m load map of supported devices[0m
[38;5;238m3003[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m ...[0m
[38;5;238m3004[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBIOSOPTS[0m[38;2;248;248;242m            [0m[38;2;117;113;94m;[0m[38;2;117;113;94m high byte is BIOS options[0m
[38;5;238m3005[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m ...[0m
[38;5;238m3006[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return[0m
[38;5;238m3007[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m3008[0m   [38;5;238mâ”‚[0m 
[38;5;238m3009[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnumbers[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m027h[0m[38;2;248;248;242m,[0m[38;2;190;132;255m010h[0m[38;2;248;248;242m,[0m[38;2;190;132;255m3[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0e8h[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m[38;2;248;248;242m,[0m[38;2;190;132;255m100[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m[38;2;248;248;242m,[0m[38;2;190;132;255m10[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m[38;2;248;248;242m,[0m[38;2;190;132;255m1[0m
[38;5;238m3010[0m   [38;5;238mâ”‚[0m 
[38;5;238m3011[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0f00h[0m
[38;5;238m3012[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_boot[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mbootide[0m
[38;5;238m3013[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m
[38;5;238m3014[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_type[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_tx[0m
[38;5;238m3015[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m3016[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_type[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtype[0m
[38;5;238m3017[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m3018[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m
[38;5;238m3019[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_read[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_rx[0m
[38;5;238m3020[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m3021[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_read[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mread[0m
[38;5;238m3022[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m3023[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_msg[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtypemsg[0m
[38;5;238m3024[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_typex[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mreturn[0m
[38;5;238m3025[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_input[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46minput256[0m
[38;5;238m3026[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_strcmp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mstrcmp[0m
[38;5;238m3027[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_ltrim[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mltrim[0m
[38;5;238m3028[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_strcpy[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mstrcpy[0m
[38;5;238m3029[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_memcpy[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmemcpy[0m
[38;5;238m3030[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_wrtsec[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m3031[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_rdsec[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m3032[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_seek0[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m3033[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_seek[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m3034[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_drive[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m
[38;5;238m3035[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_setbd[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtimalc[0m
[38;5;238m3036[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_mul16[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmul16[0m
[38;5;238m3037[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_div16[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mdiv16[0m
[38;5;238m3038[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_iderst[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mresetide[0m
[38;5;238m3039[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_idewrt[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mwrtide[0m
[38;5;238m3040[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_ideread[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrdide[0m
[38;5;238m3041[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_initcall[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m    [0m[38;2;166;226;46minitcall[0m
[38;5;238m3042[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_ideboot[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mbootret[0m
[38;5;238m3043[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_hexin[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhexin[0m
[38;5;238m3044[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_hexout2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhexout2[0m
[38;5;238m3045[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_hexout4[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mhexout4[0m
[38;5;238m3046[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m
[38;5;238m3047[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_tty[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_tx[0m
[38;5;238m3048[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m3049[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_tty[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtype[0m
[38;5;238m3050[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m3051[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_mover[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mmover[0m
[38;5;238m3052[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_minimon[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mminimon[0m
[38;5;238m3053[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_freemem[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mfreemem[0m
[38;5;238m3054[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_isnum[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46misnum[0m
[38;5;238m3055[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_atoi[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46matoi[0m
[38;5;238m3056[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_uintout[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46muintout[0m
[38;5;238m3057[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_intout[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mintout[0m
[38;5;238m3058[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_inmsg[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtypeinmsg[0m
[38;5;238m3059[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_inputl[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46minput[0m
[38;5;238m3060[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mifdef[0m[38;2;248;248;242m [0m[38;2;166;226;46mUART[0m
[38;5;238m3061[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_brktest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46me2k_brk[0m
[38;5;238m3062[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46melse[0m
[38;5;238m3063[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_brktest[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mbrktest[0m
[38;5;238m3064[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m#[0m[38;2;166;226;46mendif[0m
[38;5;238m3065[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_findtkn[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mtokenfunc[0m
[38;5;238m3066[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_isalpha[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46misalpha[0m
[38;5;238m3067[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_ishex[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mishex[0m
[38;5;238m3068[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_isalnum[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46misalnum[0m
[38;5;238m3069[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_idnum[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46midnum[0m
[38;5;238m3070[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_isterm[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46misterm[0m
[38;5;238m3071[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mf_getdev[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mgetdev[0m
[38;5;238m3072[0m   [38;5;238mâ”‚[0m 
[38;5;238m3073[0m   [38;5;238mâ”‚[0m [38;2;166;226;46minput[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save RA[0m
[38;5;238m3074[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m3075[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m3076[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mstxd[0m
[38;5;238m3077[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m byte count[0m
[38;5;238m3078[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into counter[0m
[38;5;238m3079[0m   [38;5;238mâ”‚[0m [38;2;166;226;46minplp[0m[38;2;248;248;242m:[0m[38;2;248;248;242m     [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m call input function[0m
[38;5;238m3080[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_read[0m
[38;5;238m3081[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m save char[0m
[38;5;238m3082[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m3[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for <CTRL><C>[0m
[38;5;238m3083[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46minpterm[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m terminate input[0m
[38;5;238m3084[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m5[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for <BS>[0m
[38;5;238m3085[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46misbs[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if so[0m
[38;5;238m3086[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m5[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check for <CR>[0m
[38;5;238m3087[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46minpdone[0m[38;2;248;248;242m             [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if so[0m
[38;5;238m3088[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check count[0m
[38;5;238m3089[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46minpcnt[0m[38;2;248;248;242m              [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if can continue[0m
[38;5;238m3090[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mghi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m check high of count[0m
[38;5;238m3091[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46minpcnt[0m
[38;5;238m3092[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m8[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m performa backspace[0m
[38;5;238m3093[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m3094[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_tty[0m
[38;5;238m3095[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46mbs2[0m[38;2;248;248;242m                 [0m[38;2;117;113;94m;[0m[38;2;117;113;94m remove char from screen[0m
[38;5;238m3096[0m   [38;5;238mâ”‚[0m [38;2;166;226;46minpcnt[0m[38;2;248;248;242m:[0m[38;2;248;248;242m    [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mre[0m
[38;5;238m3097[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into output[0m
[38;5;238m3098[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m point to next position[0m
[38;5;238m3099[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m08[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m look for backspace[0m
[38;5;238m3100[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbnz[0m[38;2;248;248;242m     [0m[38;2;166;226;46mnobs[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m jump if not a backspace[0m
[38;5;238m3101[0m   [38;5;238mâ”‚[0m [38;2;166;226;46misbs[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;166;226;46mglo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m get input count[0m
[38;5;238m3102[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbz[0m[38;2;248;248;242m      [0m[38;2;166;226;46minplp[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m disregard if string is empty[0m
[38;5;238m3103[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement the count[0m
[38;5;238m3104[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement buffer position[0m
[38;5;238m3105[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m increment allowed characters[0m
[38;5;238m3106[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mbs2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m       [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m32[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m display a space[0m
[38;5;238m3107[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m3108[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_tty[0m
[38;5;238m3109[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m8[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m then backspace again[0m
[38;5;238m3110[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46mscall[0m
[38;5;238m3111[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;102;217;239mdw[0m[38;2;248;248;242m      [0m[38;2;166;226;46mf_tty[0m
[38;5;238m3112[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46minplp[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and loop back for more[0m
[38;5;238m3113[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mnobs[0m[38;2;248;248;242m:[0m[38;2;248;248;242m      [0m[38;2;249;38;114minc[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m increment input count[0m
[38;5;238m3114[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mdec[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrc[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m decrement character count[0m
[38;5;238m3115[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46minplp[0m[38;2;248;248;242m               [0m[38;2;117;113;94m;[0m[38;2;117;113;94m and then loop back[0m
[38;5;238m3116[0m   [38;5;238mâ”‚[0m [38;2;166;226;46minpdone[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m need a zero terminator[0m
[38;5;238m3117[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;249;38;114mshr[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m reset DF flag, to show valid input[0m
[38;5;238m3118[0m   [38;5;238mâ”‚[0m [38;2;166;226;46minpdone2[0m[38;2;248;248;242m:[0m[38;2;248;248;242m  [0m[38;2;249;38;114mstr[0m[38;2;248;248;242m     [0m[38;2;166;226;46mrf[0m[38;2;248;248;242m                  [0m[38;2;117;113;94m;[0m[38;2;117;113;94m store into buffer[0m
[38;5;238m3119[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mirx[0m[38;2;248;248;242m                         [0m[38;2;117;113;94m;[0m[38;2;117;113;94m recover RA[0m
[38;5;238m3120[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldxa[0m
[38;5;238m3121[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mphi[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m3122[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldx[0m
[38;5;238m3123[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mplo[0m[38;2;248;248;242m     [0m[38;2;166;226;46mra[0m
[38;5;238m3124[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46msep[0m[38;2;248;248;242m     [0m[38;2;166;226;46msret[0m[38;2;248;248;242m                [0m[38;2;117;113;94m;[0m[38;2;117;113;94m return to caller[0m
[38;5;238m3125[0m   [38;5;238mâ”‚[0m [38;2;166;226;46minpterm[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;249;38;114msmi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m signal <CTRL><C> exit[0m
[38;5;238m3126[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mldi[0m[38;2;248;248;242m     [0m[38;2;190;132;255m0[0m[38;2;248;248;242m                   [0m[38;2;117;113;94m;[0m[38;2;117;113;94m finish[0m
[38;5;238m3127[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m           [0m[38;2;166;226;46mbr[0m[38;2;248;248;242m      [0m[38;2;166;226;46minpdone2[0m
[38;5;238m3128[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m          [0m
[38;5;238m3129[0m   [38;5;238mâ”‚[0m 
[38;5;238m3130[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************************[0m
[38;5;238m3131[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *** Function to implement a stack based call      ***[0m
[38;5;238m3132[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***    RX is assumed to be the stack pointer      ***[0m
[38;5;238m3133[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***    R3 is assumed to be the main PC            ***[0m
[38;5;238m3134[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***    R6 will hold return address                ***[0m
[38;5;238m3135[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***    usage is:    sep R4                        ***[0m
[38;5;238m3136[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m ***                 dw  call_addr                 ***[0m
[38;5;238m3137[0m   [38;5;238mâ”‚[0m [38;2;117;113;94m;[0m[38;2;117;113;94m *****************************************************[0m
[38;5;238m3138[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0fe0h[0m
[38;5;238m3139[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;249;38;114mcall[0m
[38;5;238m3140[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0ff1h[0m
[38;5;238m3141[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;166;226;46mlbr[0m[38;2;248;248;242m     [0m[38;2;249;38;114mret[0m
[38;5;238m3142[0m   [38;5;238mâ”‚[0m 
[38;5;238m3143[0m   [38;5;238mâ”‚[0m [38;2;248;248;242m         [0m[38;2;102;217;239morg[0m[38;2;248;248;242m     [0m[38;2;166;226;46mBASE[0m[38;2;249;38;114m+[0m[38;2;190;132;255m0ff9h[0m
[38;5;238m3144[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mversion[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m1[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m[38;2;248;248;242m,[0m[38;2;190;132;255m10[0m
[38;5;238m3145[0m   [38;5;238mâ”‚[0m [38;2;166;226;46mchsum[0m[38;2;248;248;242m:[0m[38;2;248;248;242m   [0m[38;2;102;217;239mdb[0m[38;2;248;248;242m      [0m[38;2;190;132;255m0[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m[38;2;248;248;242m,[0m[38;2;190;132;255m0[0m
[38;5;238mâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
